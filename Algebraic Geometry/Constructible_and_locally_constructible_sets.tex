\input ../pree.tex

\begin{document}

\title{Constructible and locally constructible sets}
\date{}
\maketitle

\section{Constructible sets}

\begin{definition}
Let $X$ be a topological space and let $Z$ be a subset of $X$ such that the inclusion $Z\hookrightarrow X$ is quasi-compact. Then we say that $Z$ is \textit{retro-compact subset of $X$}.
\end{definition}

\begin{definition}
Let $X$ be a topological space. We define \textit{constructible subsets of $X$} as elements of the algebra of subsets of $X$ generated by retro-compact open subsets.
\end{definition}

\begin{fact}\label{fact:constructiblepreimages}
Let $f:X\ra Y$ be a morphism of schemes and $E$ be a constructible subset of $Y$. Then $f^{-1}(E)$ is a constructible subset of $X$.
\end{fact}
\begin{proof}
We set
$$\cF = \big\{E\subseteq Y\,\big|\,f^{-1}(E)\mbox{ is constructible}\big\}$$
Obviously $\cF$ is an algebra of subsets of $Y$. By the base change for quasi-compact morphisms, we derive that $\cF$ contains all retro-compact open subsets of $Y$. This implies that $\cF$ contains all constructible subsets of $Y$.
\end{proof}
\noindent
Now we characterize constructible subsets of affine schemes.

\begin{proposition}\label{proposition:constructiblesubsetsofaffine}
Let $A$ be a ring and $E$ be a subset of $\Spec A$. Then the following are equivalent.
\begin{enumerate}[label=\emph{\textbf{(\roman*)}}, leftmargin=*]
\item $E$ is a constructible subset of $\Spec A$.
\item There exists elements $a_1$,...,$a_n$ and finitely generated ideals $\ideal{a}_1$,...,$\ideal{a}_n$ such that
$$E = \bigcup_{i=1}^nD(a_i)\cap V(\ideal{a}_i)$$
\end{enumerate}
\end{proposition}
\begin{proof}
Consider the family 
$$\cF = \bigg\{\bigcup_{i=1}^nD(a_i)\cap V(\ideal{a}_i)\,\bigg|\,a_1,...,a_n\in A\mbox{ and }\ideal{a}_1,...,\ideal{a}_n\mbox{ are finitely generated ideals of }A\bigg\}$$
Since every retro-compact open subset of $\Spec A$ is quasi-compact, it belongs to $\cF$ because it is a finite union of distinguished open subsets. Moreover, subsets in $\cF$ are closed under complements and finite unions. Therefore, $\cF$ contains all constructible subsets of $\Spec A$. On the other hand each element of $\cF$ is constructible in $\Spec A$.
\end{proof}

\begin{corollary}\label{corollary:constructibleasimage}
Let $X$ be a quasi-compact and quasi-separated scheme and let $E$ be a constructible subset of $X$. Then there exists an affine scheme $Z$ together with a morphism $f:Z\ra X$ of finite presentation such that $E = f(Z)$. 
\end{corollary}
\begin{proof}
Since $X$ is quasi-compact, there exists an open cover 
$$X = \bigcup_{j=1}^mU_j$$
by open affines. Each $E\cap U_j$ is constructible in $U_j$. Write $U_j = \Spec A_j$ for $1\leq j\leq m$. Fix $j$. By Proposition \ref{proposition:constructiblesubsetsofaffine} there exists $a_{ji}\in A$ and finitely generated ideals $\ideal{a}_{ji}\subseteq A_j$ for $1\leq i\leq n_j$ such that
$$U_j\cap E = \bigcup_{i=1}^{n_j}D(a_j)\cap V(\ideal{a}_j)$$
Consider a scheme $Z_j = \coprod_{i=1}^{n_j}\Spec \left(A_j/\ideal{a}_{ij}\right)_{a_{ji}}$ together with a canonical morphism $f_j:Z_j\ra U_j$. Next let $Z$ be an affine scheme $\coprod_{j=1}^mZ_j$ with a morphism $f:Z\ra X$ such that $f_{\mid Z_j}$ is defined as $f_j$ composed with the inclusion $U_j\hookrightarrow X$ for every $1\leq j\leq m$. Then $f$ is a finitely presented morphism (this uses the fact that $X$ is quasi-separated) and $E = f(Z)$. 
\end{proof}
\noindent
Finally we discuss constructibility for noetherian and locally noetherian topological spaces. 

\begin{fact}\label{fact:constructibleonlocallynoetherian}
Let $X$ be a locally noetherian topological space. Then the algebra of constructible sets of $X$ is generated by open subsets of $X$.
\end{fact}
\begin{proof}
Every open subset of a locally noetherian topological space is retro-compact.
\end{proof}

\begin{proposition}\label{proposition:criterionofconstructiblenoetherian}
Let $X$ be a noetherian topological space. Suppose that $E$ is a subset of $X$ such that for every irreducible closed subset $F$ of $X$ if $E\cap F$ is dense in $F$, then $E\cap F$ contains open nonempty subset of $F$. Then $E$ is constructible.
\end{proposition}
\begin{proof}
Note that by Fact \ref{fact:constructibleonlocallynoetherian} every closed subset of $X$ is constructible. Assume that $E$ is not constructible. We set
$$\cF = \big\{F\subseteq X\,\big|\,F\mbox{ is closed subset of }X\mbox{ and }E\cap F\mbox{ is not constructible in }X\big\}$$
First note that $X\in \cF$. Since $X$ is noetherian, there exists a minimal (with respect to inclusion) subset $F$ in $\cF$. If $F$ is not irreducible, then $F = F'\cup F''$ for some nonempty closed proper subsets $F'$, $F''$ of $F$. Since $F$ is minimal in $\cF$, we deduce that both $E\cap F'$ and $E\cap F''$ are constructible and hence $E\cap F  = \left(E\cap F'\right)\cup \left(E\cap F''\right)$ is constructible. This is a contradiction. Hence $F$ must be irreducible. If $E\cap F$ is not dense in $F$, then $E\cap F$ is contained in some proper closed subset $F_0$ of $F$. But then $E\cap F_0$ is constructible and $E \cap F_0 = E\cap F$. This is a contradiction. Hence $E\cap F$ is dense in $F$ and by assumption there exists nonempty subset $U\subseteq E\cap F$ open in $F$. According to $F\setminus U \subset F$ we infer that $E\cap \left(F\setminus U\right)$ is constructible. Thus
$$E\cap F = U\cup \left(E\cap \left(F\setminus U\right)\right)$$
is constructible as a union of constructible sets. This also is a contradiction. Therefore, $E$ is constructible.
\end{proof}

\section{Noether normalization lemma}
\noindent
In this section we prove important theorem on the structure of commutative and finitely generated $k$-algebras.

\begin{theorem}[Noether normalization lemma]\label{theorem:noethernormalizationlemma}
Let $k$ be a field and $A$ be a finitely generated $k$-algebra. Then there exist elements $z_1$,...,$z_n$ in $A$ algebraically independent over $k$ such that 
$$k[z_1,...,z_n]\subseteq A$$
is a finite extension of rings.
\end{theorem}
\begin{proof}
Let $\cA$ be a family of finitely generated $k$-subalgebras of $A$ such that for every $B \in \cA$ extension $B \subseteq A$ is finite. Clearly $A\in \cA$ so $\cA$ is nonempty. Now suppose that $n\in \NN$ is a minimal number of $k$-algebra generators of any element in $\cA$. Then there exist $z_1$,...,$z_n\in A$ such that $k[z_1,...,z_n]\subseteq A$ is finite. We show now that $z_1$,...,$z_n$ are algebraically independent over $k$. Let $k[x_1,...,x_n]$ be a polynomial $k$-algebra and assume that there exists nonzero $f\in k[x_1,..,x_n]$ such that $f(z_1,...,z_n)=0$. Write 
$$f(x_1,...,x_n) = \sum_{(d_1,...,d_n)\in F}a_{d_1,...,d_n}\cdot x_1^{d_1}\cdot...\cdot x_n^{d_n}$$
where $F\subseteq \NN^n$ is a finite subset and $a_{d_1,...,d_n}\in k$ are nonzero. Since $f$ is nonzero, we derive that $F$ is nonempty. Define 
$$m = 1+\max_{(d_1,...,d_n)\in F} \max_{1\leq i\leq n}d_i$$
Next define $g\in k[z_2,...,z_n][x]$ by formula 
$$g(x) = f(x,z_2-z_1^m+x^m,z_3-z_1^{m^2}+x^{m^2},...,z_n-z_1^{m^{n-1}}+x^{m^{n-1}})$$ 
Now we prove that $g$ is a monic polynomial of variable $x$. Let $\preceq$ be the lexographical order on $\NN^n$ that is
$$(d_1,...,d_n)\preceq (e_1,...,e_n)\mbox{ if }d_i\leq e_i\mbox{ for }i = \max \big\{j\,\big|\,1\leq j\leq n\mbox{ and }d_j\neq e_j\big\}$$
Since $F\subseteq \NN^n$ is finite, there exists $(M_1,...,M_n)$ in $F$ that is the greatest with respect to lexographical order $\preceq$ restricted to $F$. This implies that
$$d_1+d_2\cdot m+d_3\cdot m^2+...+d_n\cdot m^{n-1} < M_1+M_2\cdot m+M_3\cdot m^2+...+M_n\cdot m^{n-1}$$
for every $(d_1,...,d_n)\in F\setminus \{(M_1,...,M_n)\}$. This fact and a precise investigation of how coefficients of powers of $x$ in $g$ are calculated show that $g$ is monic. Note also that $g(z_1) = f(z_1,z_2,...,z_n)=0$. This implies that $z_1$ is integral over $k[z_2,...,z_n]$ and hence $k[z_2,...,z_n]\subseteq A$ is a finite extension of rings. This proves that $k[z_2,...,z_n]\in \cA$ and contradicts the definition of $n$. Therefore, such $f$ does not exists and this proves that $z_1$,...,$z_n$ are algebraically independent over $k$.
\end{proof}

\section{Locally constructible sets and Chevalley's theorem}

\begin{definition}
Let $X$ be a topological space. A subset $E$ of $X$ is called \textit{locally constructible in $X$} if for every point $x$ in $X$ there exists an open neighbourhood $U$ of $x$ in $X$ such that $E\cap U$ is constructible in $U$.
\end{definition}
\noindent
Next result is simple but worth noted.

\begin{fact}\label{fact:preimages_of_locally_constructible}
Let $f:X\ra Y$ be a morphism of schemes and $E$ be a locally constructible subset of $Y$. Then $f^{-1}(E)$ is a locally constructible subset of $X$.
\end{fact}
\begin{proof}
This is an immediate consequence of Fact \ref{fact:constructiblepreimages} and the definition of locally constructible sets.
\end{proof}

\begin{theorem}\label{theorem:locallyconstructibleonschemes}
Let $X$ be a scheme and $E$ be a subset of $X$. Then the following are equivalent.
\begin{enumerate}[label=\emph{\textbf{(\roman*)}}, leftmargin=*]
\item $E$ is locally constructible.
\item $E\cap U$ is constructible in $U$ for every open quasi-compact and quasi-separated subset $U$ of $X$.
\item $E\cap U$ is construcible in $U$ for every affine open subset $U$ of $X$.
\end{enumerate} 
\end{theorem}
\noindent
The proof is based on the following result.

\begin{lemma}\label{lemma:affineinqsandcontructibility}
Let $U$ be a quasi-separated scheme and $W$ be its open affine subset. Then every constructible subset $E$ of $W$ is constructible in $U$.
\end{lemma}
\begin{proof}[Proof of the lemma]
For every $f\in \Gamma(W,\cO_U)$ nonvanishing set $W_f$ of $f$ in $W$ is affine. Since $U$ is quasi-separated, we derive that $W_f$ is retro-compact in $U$ and hence constructible. Suppose now that $\ideal{I}\subseteq \Gamma(W,\cO_U)$ is an ideal generated by $f_1$,...,$f_n\in \Gamma(W,\cO_U)$ and $V(\ideal{I})\subseteq W$ is a vanishing set of this ideal in $W$. Then
$$V(\ideal{I}) = \left(U\setminus \bigcup_{i=1}^nW_{f_i}\right)\setminus \left(U\setminus W\right)$$
Since $U$, $W_{f_i}$ for $1\leq i\leq n$ and $W$ are constructible in $U$, we derive that $V(\ideal{I})$ is constructible in $U$. Since constructible sets of $U$ form an algebra of sets, the assertion follows from Proposition \ref{proposition:constructiblesubsetsofaffine}.
\end{proof}

\begin{proof}[Proof of the theorem]
Suppose that $E$ is a locally constructible subset of $X$ and $U$ is an open quasi-compact and quasi-separated subset of $X$. There exists a finite open cover $U = \bigcup_{j=1}^mW_j$ such that each $W_j$ is affine and $E\cap W_j$ is constructible in $W_j$. According to Lemma \ref{lemma:affineinqsandcontructibility} we deduce that each $E\cap W_j$ is constructible in $U$. Hence
$$E\cap U = \bigcup_{j=1}^m(E\cap W_j)$$
is constructible in $U$. This proves that $\textbf{(i)}\Rightarrow \textbf{(ii)}$.\\
Implications $\textbf{(ii)}\Rightarrow \textbf{(iii)}$ and $\textbf{(iii)}\Rightarrow \textbf{(i)}$ follow from definition.
\end{proof}

\begin{theorem}[Chevalley's theorem on images]\label{theorem:chevalleysimagetheorem}
Let $f:X\ra Y$ be a quasi-compact morphism of schemes locally of finite presentation and $E$ be a locally constructible subset of $X$. Then $f(E)$ is locally constructible in $Y$.
\end{theorem}
\noindent
We start by a sequence of reductions. Since the question is local on $Y$, one can assume that $Y$ is affine. Then $X$ is quasi-compact. There exists a morphism $h:\tilde{X}\ra X$ locally of finite presentation such that $\tilde{X}$ is affine. Indeed, pick an open cover $X = \bigcup_{i=1}^nU_i$ by open affine subschemes. Then we define $\tilde{X} = \coprod_{i=1}^nU_i$ and $h:\tilde{X}\ra X$ as the canonical morphism induced by inclusions $U_i\hookrightarrow X$ for $i=1,...,n$. By Fact \ref{fact:preimages_of_locally_constructible} we derive that $h^{-1}(E)$ is locally constructible in $\tilde{X}$. Moreover, $\left(f\cdot h\right)\left(h^{-1}(E)\right) = f(E)$. Thus we may assume that $X$ is affine and $f$ is of finite presentation. By Theorem \ref{theorem:locallyconstructibleonschemes} we deduce that $E$ is constructible on $X$. Next by Corollary \ref{corollary:constructibleasimage} we may assume that $E = X$. Now since $f$ is of finite presentation, there exists a cartesian square
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{X &    X'  \\
 Y &    Y'  \\} ;
\path[->,line width=1.0pt,font=\scriptsize]  
(m-1-1) edge node[above] {$ $} (m-1-2)
(m-2-1) edge node[below] {$g $} (m-2-2)
(m-1-1) edge node[left] {$ f$} (m-2-1)
(m-1-2) edge node[right] {$f'$} (m-2-2);
\end{tikzpicture}
\end{center}
with $Y'$ the spectrum of a finitely generated $\ZZ$-algebra, $f'$ is of finite type and affine $X'$. We have 
$$f(X) = g^{-1}\left(f'(X')\right)$$
Since a preimage of a constructible subset is constructible by Fact \ref{fact:constructiblepreimages}, it suffices to prove that $f'(X')$ is constructible. Hence we may assume that the base is noetherian. Thus our goal is to prove that $f(X)$ is constructible in $Y$ under assumptions that $Y$ is a noetherian affine scheme and $f$ is of finite type. For the proof of this statement we need the following interesting application of Theorem \ref{theorem:noethernormalizationlemma}

\begin{lemma}\label{lemma:denseimage}
Let $A$ be a domain and $f:A\ra B$ be an injective morphism of finite type. Then there exists nonzero $s\in A$ such that the image of $\Spec f:\Spec B\ra \Spec A$ contains the distinguished set $D(s)$ of $\Spec A$.
\end{lemma}
\begin{proof}[Proof of the lemma]
Let $S = A\setminus \{0\}$. Then $K = S^{-1}A$ is a field of fractions of $A$ and $S^{-1}B$ is a finitely generated $K$-algebra. By Theorem \ref{theorem:noethernormalizationlemma} we derive that there exists $\frac{b_1}{s_1}$,...,$\frac{b_n}{s_n}\in S^{-1}B$ algebraically independent over $K$ such that 
$$K\left[\frac{b_1}{s_1},...,\frac{b_n}{s_n}\right]\subseteq S^{-1}B$$
is a finite extension of rings. Here $b_1$,...,$b_n\in B$ and $s_1$,...,$s_n\in S$. It follows that 
$$K\left[b_1,...,b_n\right]\subseteq S^{-1}B$$
is a finite extension of rings and $b_1$,...,$b_n$ are algebraically independent over $K$. There exists a finite set $c_1$,...,$c_m$ that generates $B$ as an $A\left[b_1,...,b_n\right]$-algebra and all these elements are integral over $K\left[b_1,...,b_n\right]$. This implies that for every $1\leq i\leq m$ there exists a monic polynomial $f_i\in K\left[b_1,...,b_n\right][x]$ such that $f_i(c_i)=0$. Now there are finitely many coefficients of each $f_i$ and each of them is some algebraic expression in $b_1,...,b_n$ having coefficients in $K = S^{-1}A$. This implies that there exists nonzero $s\in A$ such that $f_i$ is a monic polynomial in $A_s[b_1,...,b_n][x]$ for every $1\leq i\leq n$. Hence the extension 
$$A_s[b_1,...,b_n]\subseteq B_s$$ 
is finite. We also know that $b_1$,...,$b_n$ are algebraically independent over $K$. Thus $A_s\subseteq B_s$ can be decomposed as a polynomial extension followed by a finite extension
$$A_s\subseteq A_s[b_1,...,b_n]\subseteq B_s$$
Both polynomial extension and finite extension induce surjective morphism on prime spectra. Thus the morphism $\Spec B_s\ra \Spec A_s$ induced by $\Spec f$ is surjective. Hence $D(s)\subseteq \Spec A$ is in the image of $\Spec f$.
\end{proof}

\begin{proof}[Proof of the theorem]
Let $f:X\ra Y$ be a finite type morphism with $Y$ affine and noetherian. As we explained above it suffices to prove that $f(X)$ is constructible. Suppose that $F$ is an irreducible closed subset of $Y$. We consider it as a subscheme of $Y$ with integral structure. By Lemma \ref{lemma:denseimage} we deduce that either the image of a morphism $f^{-1}(F)\ra F$ induced by $f$ contains nonempty open subset of $F$ or this image is not dense in $F$. Thus for every irreducible closed subset $F$ of $Y$ either $f(X)\cap F$ contains nonempty open subset of $F$ or $f(X)\cap F$ is not dense in $F$. By Proposition \ref{proposition:criterionofconstructiblenoetherian} we derive that $f(X)$ is constructible in $Y$.
\end{proof}

\begin{corollary}[Characterization of locally constructible sets on qcqs schemes]\label{corollary:locallyconstructibelonqcqs}
Let $X$ be a quasi-compact and quasi-separated scheme. Then the following are equivalent.
\begin{enumerate}[label=\emph{\textbf{(\roman*)}}, leftmargin=*]
\item $E$ is locally constructible.
\item $E$ is constructible.
\item There exists an affine scheme $Z$ and a morphism $f:Z\ra X$ of finite presentation such that $E = f(Z)$.
\end{enumerate}
\end{corollary}
\begin{proof}
The implication $\textbf{(i)}\Rightarrow \textbf{(ii)}$ follows from Theorem \ref{theorem:locallyconstructibleonschemes}. The assertion $\textbf{(ii)} \Rightarrow \textbf{(iii)}$ is a consequence of Corollary \ref{corollary:constructibleasimage} and $\textbf{(iii)}\Rightarrow \textbf{(i)}$ follows from Theorem \ref{theorem:chevalleysimagetheorem}.
\end{proof}

















































































\small
\bibliographystyle{apalike}
\bibliography{../zzz}


\end{document}