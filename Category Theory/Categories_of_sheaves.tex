\input ../pree.tex

\begin{document}

\title{Categories of sheaves}
\date{}
\maketitle

\section{Introduction}
\noindent
In this notes we study Grothendieck topologies and sheaves. For prerequisites we assume familiarity with \cite{Presheaves}. We work in Tarski-Grothendieck set theory and we choose the base universe. We do not assume that underlying categories of Grothendieck sites are small. This leads to some difficulties concerning sizes, but it pays off as the theory is more general. This is especially important as possible applications we have in mind are in algebraic geometry, where so called \textit{big sites} are important.\\
To deal with size difficulties in some of arguments we make now a few remarks of technical nature. Let $\cC$ be a category. There exists a Grothendieck universe $V$ containing the base universe $U$ such that $\cC$ is locally $V$-small (c.f. {\cite[section 1]{Presheaves}}). We have full and faithful embedding
$$\widehat{\cC} = \Fun\left(\cC^{\mathrm{op}},\Set\right) =  \Fun\left(\cC^{\mathrm{op}},\Set_U\right)\subseteq  \Fun\left(\cC^{\mathrm{op}},\Set_V\right)$$
and the inclusion preserves all limits and colimits. Objects of $\Fun\left(\cC^{\mathrm{op}},\Set_V\right)$ are called big presheaves on $\cC$. In particular, every presheaf on $\cC$ (an object $\widehat{\cC}$) is a big presheaf on $\cC$. Since $\cC$ is locally $V$-small, for every object $X$ in $\cC$ there exists big presheaf $h_X$ on $\cC$ of morphisms into $X$ and if $f:X\ra Y$ is a morphism in $\cC$, then $h_f:h_X\ra h_Y$ is a morphism of big presheaves on $\cC$. Finally, if $F$ and $G$ are big presheaves on $\cC$, then we denote by $\Mor_{\cC}(F,G)$ the class of all morphisms $F\ra G$ of big presheaves.\\
Finally let us attract reader's attention to the excellent book concerning the topic \cite{maclane1994sheaves}.

\section{Sites and sheaves}
\noindent
In this section we fix a category $\cC$.

\begin{definition}
Let $X$ be an object of $\cC$. \textit{A sieve on $X$} is a family $S$ of arrows of $\cC$ with $X$ as a target such that for every $f:Y\ra X$ in $S$ and every morphisms $g:Z\ra Y$ their composition $f\cdot g$ is in $S$.
\end{definition}
\noindent
Every sieve $S$ on object $X$ of $\cC$ corresponds to a big subpresheaf of a big presheaf $h_X$ given by
$$\cC\ni Y\mapsto \{f:Y\ra X\,\big|\,f\in S\}\in \Set_V$$
This identifies the collection of sieves on $X$ with the collection of subpresheaves of $h_X$.

\begin{fact}\label{fact:propertiesofsieves}
Let $X$ be an object of $\cC$. The class-theoretic intersection and union of a collection of sieves on $X$ is a sieve on $X$.
\end{fact}
\begin{proof}
Left to the reader.
\end{proof}

\begin{definition}
Let $\cF$ be a collection of morphisms of $\cC$ with codomain in $X$. Then the intersection of all sieves on $X$ containing $\cF$ is called \textit{the sieve generated by $\cF$}.
\end{definition}
\noindent
One can directly describe the sieve on $X$ generated by $\cF = \{f_i:X_i\ra X\}_{i\in I}$ as a class of arrows $f:Y\ra X$ in $\cC$ such that $f$ factors through $f_i$ for some $i\in I$. 

\begin{definition}
Let $S$ be a sieve on $X$ and $f:Y\ra X$ be a morphism, then we define a sieve on $Y$ by formula
$$f^*S=\big\{g\in \bd{Mor}(\cC)\,\big|\,\mbox{ target of }g\mbox{ is }Y\mbox{ and }f\cdot g\in S\big\}$$
We call $f^*S$ \textit{the pullback of $S$ along $f$}.
\end{definition}

\begin{definition}
For every object $X$ in $\cC$ the family 
$$\big\{f\in \bd{Mor}(\cC)\,\big|\,\mbox{ target of }f\mbox{ is }X\big\}$$
is a sieve on $X$. We call it \textit{the maximal sieve on $X$}.
\end{definition}
 
\begin{definition}
\textit{A Grothendieck topology on $\cC$} is a collection $\cJ=\{\cJ(X)\}_{X\in \cC}$ such that $\cJ(X)$ is a class of sieves on $X$ and the following conditions are satisfied. 
\begin{enumerate}[label=\textbf{(\arabic*)}, leftmargin=1.5em]
\item The maximal sieve on $X$ is in $\cJ(X)$.
\item If $S\in \cJ(X)$ and $f:Y\ra X$, then $f^*S\in \cJ(Y)$.
\item Suppose that $S\in \cJ(X)$, $R$ is a sieve on $X$ and $f^*R\in \cJ(\mathrm{dom}(f))$ for every $f\in S$. Then $R\in \cJ(X)$.
\end{enumerate}
Sieves in class
$$\bigcup_{X\in \cC}\cJ(X)$$
are called \textit{covering sieves}. A pair $(\cC,\cJ)$ consisting of a category $\cC$ and a Grothendieck topology $\cJ$ is called \textit{a site}.
\end{definition}

\begin{proposition}\label{proposition:coveringsievesproperties}
Let $\cJ$ be a Grothendieck topology on $\cC$ and $X$ be an object of $\cC$. Then the following assertions hold.
\begin{enumerate}[label=\emph{\textbf{(\arabic*)}}, leftmargin=1.5em]
\item Class $\cJ(X)$ is closed under finite intersections.
\item If $S\in \cJ(X)$ and $R$ is a sieve on $X$ such that $S\subseteq R$, then $R\in \cJ(X)$.
\end{enumerate}
\end{proposition}
\begin{proof}
We prove \textbf{(1)}. For this assume that $S$ and $T$ are covering sieves on $X$. Then $S\cap T$ is a sieve. Next pick $f:Y\ra X$ in $S$. Note that $f^*(S\cap T)=f^*T\in \cJ(Y)$. This implies that $S\cap T\in \cJ(X)$.\\
We prove now \textbf{(2)}. Fix $f:Y\ra X$ in $S$. Then $f^*R$ is the maximal sieve on $Y$ due to $S\subseteq R$. Hence $f^*R\in \cJ(Y)$. Since $S\in \cJ(X)$, we deduce that $R\in \cJ(X)$.
\end{proof}

\begin{fact}\label{fact:compositionofcoveringsieves}
Let $\cJ$ be a Grothendieck topology on $\cC$ and $X$ be an object of $\cC$. Suppose that $S$ is a covering sieve on $X$ and for each $f:Y\ra X$ in $S$ pick a covering sieve $R_f$ on $Y$. Then a family
$$R=\bigcup_{f\in S}f\cdot R_f$$ 
is a covering sieve on $X$.
\end{fact}
\begin{proof}
For every $f:Y\ra X$ in $S$ we have $R_f\subseteq f^*R$. By Proposition \ref{proposition:coveringsievesproperties} and since $R_f$ is in $\cJ(Y)$, we deduce that $f^*R\in \cJ(Y)$. Hence $f^*R$ is a covering sieve for every $f\in S$. This implies that $R\in \cJ(X)$.
\end{proof}

\begin{definition}
Let $F$ be a presheaf on $\cC$. Suppose that $X$ is an object of $\cC$ and $S$ is a sieve on $X$. We say that a family $\{x_f\}_{f\in S}$ such that $x_f\in F(\mathrm{dom}(f))$ is \textit{a matching family for $S$ of elements of $F$} if for every $f:Y\ra X$ in $S$ and $g:Z\ra Y$ in $\cC$ we have
$$F(g)(x_f)=x_{f\cdot g}$$
We say that an element $x\in F(X)$ is \textit{an amalgamation for the matching family} $\{x_f\}_{f\in S}$ if for every $f\in S$ we have $F(f)(x)=x_f$.
\end{definition}
\noindent
Let $S$ be an arbitrary sieve on object $X$ in $\cC$ and $F$ be a presheaf on $\cC$. In this notes we denote by $F(S)$ the class of matching families for $S$ of elements of $F$.\\
Note that if $S$ is a sieve on $X$ viewed as a big subpresheaf of $h_X$, then a matching family for $S$ of elements of $F$ can be viewed as a morphisms of big presheaves $S\ra F$. This identifies the collection of matching families for $S$ of elements of $F$ with a collection of morphisms $S\ra F$ of big presheaves. That is we have identification $F(S) = \Mor_{\cC}\left(S,F\right)$. Next suppose that $\{x_f\}_{f\in S}$ is a matching family for $S$ of elements of $F$. Then amalgamations of $\{x_f\}_{f\in S}$ can be identified by means of Yoneda lemma {\cite[Theorem 3.3]{Presheaves}} with morphisms $h_X\ra F$ making the following triangle
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ h_X&       F  \\
   S &          \\} ;
\path[densely dotted, ->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$  $} (m-1-2);
\path[left hook ->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[left] {$ $} (m-1-1);
\path[->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[below = 3pt, right = 1pt] {$ \{x_f\}_{f\in S}$} (m-1-2);
\end{tikzpicture}
\end{center}
commutative.

\begin{definition}
Let $\cJ$ be a Grothendieck topology on $\cC$ and $F$ be a presheaf on $\cC$. We say that $F$ is \textit{a separated presheaf with respect to $\cJ$} if for any object $X$ in $\cC$, covering sieve $S\in \cJ(X)$ and for every matching family $\{x_f\}_{f\in S}$ for $S$ of elements of $F$ there exists at most one amalgamation $x\in F(X)$.
\end{definition} 

\begin{definition}
Let $\cJ$ be a Grothendieck topology on $\cC$ and $F$ be a presheaf on $\cC$. We say that $F$ is \textit{a sheaf with respect to $\cJ$} if for any object $X$ in $\cC$, covering sieve $S\in \cJ(X)$ and for every matching family $\{x_f\}_{f\in S}$ for $S$ of elements of $F$ there exists a unique amalgamation $x\in F(X)$.
\end{definition}
\noindent
In other words $F\in \widehat{\cC}$ is a separated presheaf (sheaf) with respect to a Grothendieck topology $\cJ$ on $\cC$ if for any $X\in \cC$, sieve $S\in \cJ(X)$ and morphism $S\ra F$ of big presheaves there exists at most one (a unique) morphism $h_X\ra F$ of big presheaves making the triangle 
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ h_X&       F  \\
   S &          \\} ;
\path[densely dotted, ->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$  $} (m-1-2);
\path[left hook ->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[left] {$ $} (m-1-1);
\path[->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[below = 5pt, right = -2pt] {$ \{x_f\}_{f\in S} $} (m-1-2);
\end{tikzpicture}
\end{center}
commutative.\\
Let $\cJ$ be a Grothendieck topology on $\cC$. We denote by $\PrSh_s(\cC,\cJ)$, $\Sh(\cC,\cJ)$  full subcategories of $\widehat{\cC}$ consisting of separated presheaves and sheaves with respect to $\cJ$, respectively.

\begin{theorem}\label{theorem:limitsinsheavesandseparatedpresheaves}
Let $\cJ$ be a Grothendieck topology on $\cC$. Then inclusion functors $\PrSh_s(\cC,\cJ)\ra \widehat{\cC}$, $\Sh(\cC,\cJ)\ra \widehat{\cC}$ create limits.
\end{theorem}
\begin{proof}
Let $D:I\ra \PrSh_s(\cC,\cJ)$ be a functor and assume that $\left(F,\big\{f_i:F\ra D(i)\big\}_{i\in I}\right)$ is a limiting cone over the composition of the functor $D:I\ra \PrSh_s(\cC,\cJ)$ with the inclusion $\PrSh_s(\cC,\cJ)\hookrightarrow \widehat{\cC}$. We show that $F$ is a separated presheaf with respect to $\cJ$. Suppose that $S$ is a covering sieve on $X$ and $m:S\ra F$ is a morphism of big presheaves that represents certain matching family for $S$ of elements of $F$. Let $u:S\ra h_X$ be the inclusion. Suppose that morphism $p:h_X\ra F$ of big presheaves is an amalgamation for $m$. We need to show that this amalgamation is unique. For this it suffices to observe that from equality $p\cdot u = m$ we derive that $(f_i\cdot p)\cdot u = f_i\cdot m$ for $i\in I$. Hence for every $i\in I$ morphism $f_i\cdot p$ is an amalgamation of $f_i\cdot m$. Since $D(i)$ is a separated presheaf for every $i\in I$, this makes $f_i\cdot p$ uniquely determined for $i\in I$. Thus $p$ is uniquely determined itself according to the fact that the cone $\left(F,\big\{f_i\big\}_{i\in I}\right)$ is limiting in $\widehat{\cC}$ and the inclusion of presheaves in big presheaves preserves limits. Therefore, $F$ is a separated presheaf with respect to $\cJ$ and hence $\left(F,\big\{f_i\big\}_{i\in I}\right)$ is a limiting cone for $D$ in the category of separated presheaves.\\
Now assume that $D:I\ra \Sh(\cC,\cJ)$ is a functor and $\left(F,\big\{f_i:F\ra D(i)\big\}_{i\in I}\right)$ is a limiting cone over the composition of the functor $D:I\ra \Sh(\cC,\cJ)$ with the inclusion $\Sh(\cC,\cJ)\ra \widehat{\cC}$. We show that $F$ is sheaf with respect to $\cJ$. From what we prove above we know that $F$ is a separated presheaf with respect to $\cJ$. Suppose that $S$ is a covering sieve on $X$ and $m:S\ra F$ is a morphism of big presheaves that represents certain matching family for $S$ of elements of $F$. Let $u:S\ra h_X$ be the inclusion. It suffices to construct an amalgamation $p:h_X\ra F$ for $m$. We define $m_i = f_i \cdot m$ for $i\in I$. Now fix $i\in I$ for a moment. Then $m_i:S\ra D(i)$ is a matching family for $S$ of elements of a sheaf $D(i)$. Hence there exists a unique morphism $p_i:h_X\ra D(i)$ such that the triangle
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ h_X&       D(i)  \\
   S &          \\} ;
\path[densely dotted, ->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ p_i $} (m-1-2);
\path[left hook ->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[left] {$u$} (m-1-1);
\path[->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[below = 5pt, right = -2pt] {$ m_i $} (m-1-2);
\end{tikzpicture}
\end{center}
is commutative. Now pick a morphism $\alpha:i\ra j$ in $I$. Then 
$$D(\alpha)\cdot p_i\cdot u = D(\alpha)\cdot m_i = m_j = p_j\cdot u$$
According to uniqueness of $p_j$ we deduce that $D(\alpha)\cdot p_i = p_j$. Hence $\left(h_X,\big\{p_i\big\}_{i\in I}\right)$ is a cone over $D$ in the category of big presheaves. Therefore, there exists a unique morphism $p:h_X\ra F$ of big presheaves such that $f_i\cdot p = p_i$ for every $i\in I$. Hence 
$$f_i\cdot p\cdot u=p_i\cdot u= m_i = f_i\cdot m$$
for every $i\in I$. Thus $p\cdot u = m$ because the cone $\left(F,\big\{f_i\big\}_{i\in I}\right)$ is limiting. Therefore, matching family $m$ for $S$ of elements of $F$ admits an amalgamation $p$ and hence $\left(F,\big\{f_i\big\}_{i\in I}\right)$ is a limiting cone for $D$ in the category of sheaves. 
\end{proof}
\noindent
The remaining part of this section contains some technical facts that we use in further developement.

\begin{definition}
Let $F$ be a presheaf on $\cC$ and let $\cF = \big\{f_i:X_i\ra X\big\}_{i\in I}$ be a collection of morphisms in $\cC$ with codomain $X$. Assume that $\{x_i\}_{i\in I}$ is a collection such that $x_i\in F(X_i)$ for every $i\in I$ and
$$F(g_i)(x_i) = F(g_j)(x_j)$$
for any morphisms $g_i:Y\ra X_i$, $g_j:Y\ra X_j$ in $\cC$ satisfying $f_i\cdot g_i = f_j\cdot g_j$ for every pair $i,j\in I$. Then $\{x_i\}_{i\in I}$ is called \textit{a matching family for $\cF$ of elements of $F$}.
\end{definition}
\noindent
If $F$ is a presheaf on $\cC$ and $\cF = \big\{f_i:X_i\ra X\big\}_{i\in I}$ is a collection of morphisms in $\cC$ with codomain $X$, then we denote the class of matching families for $\cF$ of elements of $F$ by $F(\cF)$. Suppose that $S$ is a sieve generated by $\cF$. We have canonical injective map $\mathrm{can}_{\cF}:F(\cF)\ra \prod_{i\in I}F(X_i)$ and we denote by $\mathrm{res}_{S,\cF}:F(S)\ra F(\cF)$ a map that sends $\{x_f\}_{f\in S}$ to $\{x_{f_i}\}_{i\in I}$.

\begin{proposition}\label{proposition:matchingfamiliesaskernels}
Fix a presheaf $F$ on $\cC$ and a collection $\cF = \{f_i:X_i\ra X\}_{i\in I}$ of arrows in $\cC$ with codomain in $X$. Let $S$ be a sieve generated by this family. Then $\mathrm{res}_{S,\cF}$ is bijective. Moreover, if $\cC$ admits fiber products, then 
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=6em,text height=1.5ex, text depth=0.25ex] 
{F(\cF) &   \prod_{i\in I}F(X_i)&  \prod_{(i,j)\in I\times I} F(X_i\times_XX_j)  \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ \mathrm{can}_{\cF} $} (m-1-2)
(m-1-2) edge[transform canvas={yshift=0.5ex}] node[above] {$ \langle F(f'_{ij}) \cdot pr_i\rangle_{(i,j)}$} (m-1-3)
(m-1-2) edge[transform canvas={yshift=-0.5ex}] node[below] {$ \langle F(f''_{ij}) \cdot pr_j\rangle_{(i,j)}$} (m-1-3);
\end{tikzpicture}
\end{center}
is a kernel of this pair of arrows, where for every $(i,j)\in I\times I$ morphisms $f'_{ij}$ and $f'_{ji}$ form a cartesian square
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=2em,text height=1.5ex, text depth=0.25ex] 
{X_i\times_XX_j &  &   X_j   \\
 X_i&   & X   \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ f''_{ij}$} (m-1-3)
(m-2-1) edge node[below] {$ f_i $} (m-2-3)
(m-1-1) edge node[left] {$ f'_{ij} $} (m-2-1)
(m-1-3) edge node[right] {$ f_j  $} (m-2-3);
\end{tikzpicture}
\end{center}
\end{proposition}
\begin{proof}
Let $\{x_i\}_{i\in I}$ be a matching family for $\cF$ of elements of $F$. For every $f:Y\ra X$ in $S$ there exists $i\in I$ such that $f = f_i\cdot g_i$ for some $g_i:Y\ra X_i$. Indeed, this follows from the fact that $\cF$ generates $S$. We define $x_f = F(g_i)(x_i)$. Since $\{x_i\}_{i\in I}$ is a matching family for $\cF$ of elements of $F$, we derive that $x_f$ does not depend on the choice of $i\in I$ and factorization $f = f_i\cdot g_i$. This implies that $\{x_f\}_{f\in S}$ is a matching family for $S$ of elements of $F$. Now correspondence $\{x_i\}_{i\in I}\mapsto \{x_f\}_{f\in S}$ is the inverse of $\mathrm{res}_{S,\cF}$. This proves the first part of the statement.\\
Let $\left(x_i\right)_{i\in I}$ be an element of $\prod_{i\in I}F(X_i)$ such that $F(f'_{ij})(x_i)=F(f''_{ij})(x_j)$ for every pair $(i,j)\in I\times I$. Assume that for some $f:Y\ra X$ in $S$ we can write $f = f_i\cdot g_i$ for some $i\in I$ and $g_i:Y\ra X_i$ and similarly $f = f_j\cdot g_j$ for some $j\in I$ and $g_j:Y\ra X_j$. Then there exist a unique $g:Y\ra X_i\times_XX_j$ such that $g_i = f'_{ij}\cdot g$ and $g_j = f''_{ij}\cdot g$. We have
$$F(g_i)(x_i)=F(f'_{ij}\cdot g)(x_i)=F(g)\left(F(f'_{ij})(x_i)\right)=F(g)\left(F(f''_{ij})(x_j)\right)=F(f''_{ij}\cdot g)(x_j)=F(g_j)(x_j)$$
It follows that $\{x_i\}_{i\in I}$ is a matching family for $\cF$ of elements of $F$ and $\mathrm{can}_{\cF}\left(\{x_i\}_{i\in I}\right)=\left(x_i\right)_{i\in I}$. This proves that $\mathrm{can}_{\cF}$ is a bijection between $F(\cF)$ and the class of elements $\left(x_i\right)_{i\in I}\in \prod_{i\in I}F(X_i)$ such that $F(f'_{ij})(x_i)=F(f''_{ij})(x_j)$ for every pair $(i,j)\in I\times I$. This finishes the proof of the second part of the statement.
\end{proof}
\noindent
Next if $S\subseteq R$ are sieves on $X$ and $F$ is a presheaf on $\cC$, then we denote by $\mathrm{res}_{R,S}:F(R)\ra F(S)$ a map given by $\mathrm{res}_{R,S}(\{x_f\}_{f\in R}) = \{x_f\}_{f\in S}$. The next result is a useful technical tool.

\begin{proposition}\label{proposition:separatdpresheavesinduceinjections}
Let $\cJ$ be a Grothendieck topology on $\cC$ and $F$ be a separated presheaf with respect to $\cJ$. Pick $X$ in $\cC$. If $R$, $S$ in $\cJ(X)$ satisfy $S\subseteq R$, then $\mathrm{res}_{R,S}:F(R)\ra F(S)$ is injective.
\end{proposition}
\begin{proof}
Let $\mathrm{res}_{R,S}(\{x_f\}_{f\in R})=\{x_f\}_{f\in S}$. We show that $\{x_f\}_{f\in R}$ is uniquely determined by $\{x_f\}_{f\in S}$. For this pick $g\in R$ and consider $\{x_{g\cdot f}\}_{f\in g^*S}$. This is a subfamily of $\{x_f\}_{f\in S}$. For every $f\in g^*S$ we have $F(f)(x_g)=x_{g\cdot f}$ and hence $x_g$ is an amalgamation for a matching family $\{x_{g\cdot f}\}_{f\in g^*S}$ for $g^*S$ of elements of $F$. Since $F$ is a separated presheaf with respect to $\cJ$, we deduce that $x_g$ is uniquely determined with $\{x_{g\cdot f}\}_{f\in g^*S}$ and hence it is uniquely determined by $\{x_f\}_{f\in S}$. Arrow $g$ is an arbitrary element of $R$. Thus $\mathrm{res}_{R,S}$ is injective.
\end{proof}

\section{Grothendieck pretopologies}
\noindent
Let $\cC$ be a category with fiber products.

\begin{definition}
For every $X$ in $\cC$ let $\cK(X)$ be a class of collections $\{f_i:X_i\ra X\}_{i\in I}$ of arrows in $\cC$ with codomain in $X$. Assume that $\cK=\{\cK(X)\}_{X\in \cC}$ satisfies the following assertions.
\begin{enumerate}[label=\textbf{(\arabic*)}, leftmargin=1.5em]
\item $\{1_X:X\ra X\}\in \cK(X)$ for every object $X$ in $\cC$. 
\item If $\{f_i:X_i\ra X\}_{i\in I}\in \cK(X)$ for some $X$ in $\cC$ and $f:Y\ra X$ is a morphism, then $\{f'_i:X_i\times_XY\ra Y\}_{i\in I}\in \cK(Y)$ where $f'_i$ are defined by cartesian squares
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=2em,text height=1.5ex, text depth=0.25ex] 
{X_i\times_XY &  &   X_i   \\
 Y&   & X   \\} ;
\path[->,line width= 0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ $} (m-1-3)
(m-2-1) edge node[below] {$ f $} (m-2-3)
(m-1-1) edge node[left] {$ f'_i$} (m-2-1)
(m-1-3) edge node[right] {$f_i $} (m-2-3);
\end{tikzpicture}
\end{center}
\item Suppose that $\{f_i:X_i\ra X\}_{i\in I} \in \cK(X)$ and $\{f_{ij}:X_{ij}\ra X_i\}_{j\in J_i}\in \cK(X_i)$ for every $i\in I$. Then $\{f_i\cdot f_{ij}:X_{ij}\ra X\}_{i\in I,j\in J_i}\in \cK(X)$.
\end{enumerate}
Then we say that $\cK=\{\cK(X)\}_{x\in \cC}$ is \textit{a Grothendieck pretopology on $\cC$}.
\end{definition}

\begin{proposition}
Suppose that $\cK=\{\cK(X)\}_{X\in \cC}$ is a Grothendieck pretopology on $\cC$. For every $X$ in $\cC$ define 
$$\cJ(X)=\big\{S\,\big|\,S\mbox{ is a sieve on }X\mbox{ and }S\mbox{ contains some collection in }\cK(X)\big\}$$
Then $\cJ=\{\cJ(X)\}_{X\in \cC}$ is a Grothendieck topology on $\cC$.
\end{proposition}
\begin{proof}
Note that for every object $X$ in $\cC$ we have
$$\big\{f\in \bd{Mor}(\cC)\,\big|\,\mbox{ codomain of }f\mbox{ is }X\big\}=\mbox{a sieve on }X\mbox{ that contains }1_X$$
According to $\{1_X:X\ra X\}\in \cK(X)$, we derive that family $\cJ(X)$ contains the maximal sieve on $X$.\\
Now suppose that $S\in \cJ(X)$ and $f:Y\ra X$. There exists $\{f_i:X_i\ra X\}_{i\in I}\in \cK(X)$ that is contained in $S$. Then $f^*S$ contains $\{f'_i:X_i\times_XY\ra Y\}_{i\in I}$ where $f'_i$ are defined by cartesian squares
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=2em,text height=1.5ex, text depth=0.25ex] 
{X_i\times_XY &  &   X_i   \\
 Y&   & X   \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ $} (m-1-3)
(m-2-1) edge node[below] {$ f $} (m-2-3)
(m-1-1) edge node[left] {$ f'_i$} (m-2-1)
(m-1-3) edge node[right] {$f_i $} (m-2-3);
\end{tikzpicture}
\end{center}
Since we have $\{f'_i:X_i\times_XY\ra Y\}_{i\in I}\in \cK(Y)$, we deduce that $f^*S\in \cJ(Y)$.\\
Finally assume that $R$ is a sieve on $X$, $S\in \cJ(X)$ and for every $f\in S$ we have $f^*R\in \cJ(\mathrm{dom}(f))$. By definition there exists $\{f_i:X_i\ra X\}_{i\in I}\in \cK(X)$ contained in $S$ and for every $i\in I$ there exists $\{f_{ij}:X_{ij}\ra X\}_{j\in J_i}\in \cK(X_i)$ contained in $f_i^*R$. Thus $R$ contains $\{f_i\cdot f_{ij}:X_{ij}\ra X\}_{i\in I,j\in J_i}$ and this is a family in $\cK(X)$. Hence $R\in \cJ(X)$.
\end{proof}

\begin{definition}
Let $\cK$ be a Grothendieck pretopology on $\cC$ and $\cJ$ be a Grothendieck topology on $\cC$ given by 
$$\cJ(X)=\big\{S\,\big|\,S\mbox{ is a sieve on }X\mbox{ and }S\mbox{ contains some collection in }\cK(X)\big\}$$
then we say that $\cJ$ is \textit{a Grothendieck topology generated by $\cK$}.
\end{definition}

\begin{definition}
Let $\cJ$ be a Grothendieck topology on $\cC$ and $\cK$ be a Grothendieck pretopology on $\cC$ that generates $\cJ$. Then we say that $\cK$ is \textit{a basis of the Grothendieck topology $\cJ$}.
\end{definition}
\noindent
The next result characterizes sheaves on sites for which Grothendieck topology is generated by some Grothendieck pretopology.

\begin{theorem}\label{theorem:sheavesintermsofkernels}
Let $\cK$ be a Grothendieck pretopology on $\cC$ and $\cJ$ be a topology generated by $\cK$. Then a presheaf $F$ on $\cC$ is a sheaf on with respect to $\cJ$ if and only if for every $\{f_i:X_i\ra X\}_{i\in I}\in \cK(X)$ the diagram
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=6em,text height=1.5ex, text depth=0.25ex] 
{F(X) &   \prod_{i\in I}F(X_i)& \prod_{(i,j)\in I\times I} F(X_i\times_XX_j)  \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$\langle F(f_i)\rangle_{i\in I} $} (m-1-2)
(m-1-2) edge[transform canvas={yshift=0.5ex}] node[above] {$ \langle F(f'_{ij}) \cdot pr_i\rangle_{(i,j)}$} (m-1-3)
(m-1-2) edge[transform canvas={yshift=-0.5ex}] node[below] {$ \langle F(f''_{ij}) \cdot pr_j\rangle_{(i,j)}$} (m-1-3);
\end{tikzpicture}
\end{center}
is a kernel of this pair of arrows, where for every $(i,j)\in I\times I$ morphisms $f'_{ij}$ and $f'_{ji}$ form a cartesian square
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=2em,text height=1.5ex, text depth=0.25ex] 
{X_i\times_XX_j &  &   X_j   \\
 X_i&   & X   \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ f''_{ij}$} (m-1-3)
(m-2-1) edge node[below] {$ f_i $} (m-2-3)
(m-1-1) edge node[left] {$ f'_{ij} $} (m-2-1)
(m-1-3) edge node[right] {$ f_j  $} (m-2-3);
\end{tikzpicture}
\end{center}
\end{theorem}
\begin{proof}
Suppose that $F$ is a sheaf with respect to $\cJ$ and $\cF = \{f_i:X_i\ra X\}_{i\in I}$ be a collection in $\cK(X)$. Let $S$ be a sieve generated by $\{f_i\}_{i\in I}$. Then according to Proposition \ref{proposition:matchingfamiliesaskernels} we deduce that the diagram
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=6em,text height=1.5ex, text depth=0.25ex] 
{F(S) &   \prod_{i\in I}F(X_i)&  \prod_{(i,j)\in I\times I} F(X_i\times_XX_j)  \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$\mathrm{can}_{\cF} \cdot \mathrm{res}_{S,\cF}^{-1} $} (m-1-2)
(m-1-2) edge[transform canvas={yshift=0.5ex}] node[above] {$ \langle F(f'_{ij}) \cdot pr_i\rangle_{(i,j)}$} (m-1-3)
(m-1-2) edge[transform canvas={yshift=-0.5ex}] node[below] {$ \langle F(f''_{ij}) \cdot pr_j\rangle_{(i,j)}$} (m-1-3);
\end{tikzpicture}
\end{center}
is a kernel diagram. Since $F$ is sheaf in $\cJ$ and $S\in \cJ(X)$, we derive that the map $\mathrm{res}_S:F(X)\ra F(S)$ that sends $x\in F(X)$ to $\{F(f)(x)\}_{f\in S}$ is a bijection. Hence 
$$\langle F(f_i)\rangle_{i\in I} = \mathrm{can}_{\cF}\cdot \mathrm{res}_{S,\cF}^{-1}\cdot \mathrm{res}_S:F(X)\ra \prod_{i\in I}F(X_i)$$
is a kernel of the pair consisting of $\langle F(f'_{ij}) \cdot pr_i\rangle_{(i,j)}$ and $\langle F(f''_{ij}) \cdot pr_j\rangle_{(i,j)}$.\\
Now assume that $F$ is a presheaf on $\cC$ and for every collection $\{f_i:X_i\ra X\}_{i\in I}$ in $\cK(X)$ the diagram 
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=6em,text height=1.5ex, text depth=0.25ex] 
{F(X) &   \prod_{i\in I}F(X_i)& \prod_{(i,j)\in I\times I} F(X_i\times_XX_j)  \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$\langle F(f_i)\rangle_{i\in I} $} (m-1-2)
(m-1-2) edge[transform canvas={yshift=0.5ex}] node[above] {$ \langle F(f'_{ij}) \cdot pr_i\rangle_{(i,j)}$} (m-1-3)
(m-1-2) edge[transform canvas={yshift=-0.5ex}] node[below] {$ \langle F(f''_{ij}) \cdot pr_j\rangle_{(i,j)}$} (m-1-3);
\end{tikzpicture}
\end{center}
is a kernel. Now Proposition \ref{proposition:matchingfamiliesaskernels} implies that for any object $X$ and sieve $S$ generated by a collection in $\cK(X)$ every matching family for $S$ of elements of $F$ admits a unique amalgamation. In other words for every sieve $S$ on $X$ generated by some collection in $\cK(X)$ the map $\mathrm{res}_S:F(X)\ra F(S)$ that sends $x\in F(X)$ to $\{F(f)(x)\}_{f\in S}$ is bijective. Consider now any sieve $R$ in $\cJ(X)$. Then there exists a sieve $S$ on $X$ generated by some collection of $\cK(X)$ such that $S\subseteq R$. Consider a commutative triangle
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=2em, column sep=1em,text height=1.5ex, text depth=0.25ex] 
{ F(R)&      &  F(S)  \\
      &F(X)&          \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ \mathrm{res}_{R,S} $} (m-1-3)
(m-2-2) edge node[below = 3pt, left = 1pt] {$ \mathrm{res}_{R} $} (m-1-1)
(m-2-2) edge node[below = 3pt, right = 1pt] {$ \mathrm{res}_{S} $} (m-1-3);
\end{tikzpicture}
\end{center}
where $\mathrm{res}_{R,S}\left(\{x_f\}_{f\in R}\right)=\{x_f\}_{f\in S}$, $\mathrm{res}_{R}(x)=\{F(f)(x)\}_{f\in R}$ and $\mathrm{res}_{S}(x)=\{F(f)(x)\}_{f\in S}$. By what we prove above, we deduce that $\mathrm{res}_S$ is a bijection. Hence $\mathrm{res}_R$ is injective. Thus $F$ is a separated presheaf with respect to $\cJ$. By Proposition \ref{proposition:separatdpresheavesinduceinjections} the map $\mathrm{res}_{R,S}$ is injective. Therefore, $\mathrm{res}_{R,S}$, $\mathrm{res}_R$ are injective and $\mathrm{res}_S$ is bijective and they form a commutative triangle. Hence they are all bijective maps of classes. In particular, $\mathrm{res}_R$ is bijective. We deduce that $F$ is a sheaf with respect to $\cJ$.
\end{proof}

\section{Dense subsites and comparison theorem}

\begin{proposition}\label{proposition:densesubcategoriescharacterization}
Let $(\cC,\cJ)$ be a Grothendieck site and $\cD$ be its full subcategory. Then the following are equivalent.
\begin{enumerate}[label=\emph{\textbf{(\roman*)}}, leftmargin=1.5em]
\item For every object $X$ of $\cC$ and every $S$ covering sieve in $\cJ(X)$ there exists a sieve $R$ in $\cJ(X)$ contained in $S$ and generated by a collection of morphisms with domains in $\cD$.
\item For every object $X$ of $\cC$ there exists a covering sieve $S$ of $X$ generated by a collection of morphisms in $\cC$ with domains in $\cD$.
\end{enumerate}
\end{proposition}
\begin{proof}
The implication $\textbf{(i)}\Rightarrow \textbf{(ii)}$ is obvious. We prove $\textbf{(ii)}\Rightarrow \textbf{(i)}$. Let $f:Y\ra X$ be a morphism in $S$. We derive that there exists a covering sieve $R_f$ in $\cJ(Y)$ generated by a collection of morphisms with domains in $\cD$. Now a collection
$$R = \bigcup_{f\in S}f\cdot R_f$$
is a covering sieve on $X$ by Fact \ref{fact:compositionofcoveringsieves}. It is also contained in $S$ and is generated by morphisms with domains in $\cD$.
\end{proof}

\begin{definition}
Let $(\cC, \cJ)$ be a site and $\cD$ be a full subcategory of $\cC$ satisfying equivalent conditions of Proposition \ref{proposition:densesubcategoriescharacterization} above. Then $\cD$ is called \textit{a dense subcategory of a site $(\cC,\cJ)$}.
\end{definition}

\begin{corollary}\label{corollary:topologygeneratedondense}
Let $(\cC, \cJ)$ be a site and $\cD$ be its dense subcategory. For every object $X$ in $\cD$ let $\cJ_{\cD}(X)$ be a collection of all sieves on $X$ in $\cD$ that generate sieves in $\cJ(X)$. Then $\cJ_{\cD}$ is a Grothendieck topology on $\cD$.
\end{corollary}
\begin{proof}
Let $X$ be an object of $\cD$. The maximal sieve on $X$ in $\cD$ generates the maximal sieve on $X$ in $\cC$. Hence the former is an element of $\cJ_{\cD}(X)$.\\
Suppose next that $S$ is a sieve in $\cJ_{\cD}(X)$ for some object $X$ of $\cD$ and let $f:Y\ra X$ be a morphism in $\cD$. Let $T$ be a sieve in $\cC$ generated by $S$. By definition $T\in \cJ(X)$ and according to Proposition \ref{proposition:densesubcategoriescharacterization} sieve $f^*T\in \cJ(Y)$ contains a member of $\cJ(Y)$ generated by some sieve $R$ in $\cJ_{\cD}(Y)$. Then $R\subseteq f^*S$ and hence $f^*S \in \cJ_{\cD}(Y)$.\\
Finally suppose that $X$ is an object of $\cD$ and $S$, $R$ are sieves on $X$ in $\cD$. Assume that $S\in \cJ_{\cD}(X)$ and $f^*R\in \cJ_{\cD}(\mathrm{dom}(f))$ for every $f\in S$. Let $T$ be a sieve in $\cC$ generated by $R$. Then for every $f\in S$ we have $f^*R\subseteq f^*T$. Since $f^*R\in \cJ_{\cD}(\mathrm{dom}(f))$, we deduce that sieve in $\cC$ generated by $f^*R$ is in $\cJ(\mathrm{dom}(f))$. This shows that $f^*T \in \cJ(\mathrm{dom}(f))$. Therefore, $f^*T$ is a covering sieve in $\cC$ for every $f\in S$. Since $S$ generates a covering sieve in $\cC$, we deduce that $T\in \cJ(X)$. Hence $R \in \cJ_{\cD}(X)$.
\end{proof}

\begin{definition}
Let $(\cC,\cJ)$ be a site and $\cD$ be its dense subcategory. Then the Grothendieck topology $\cJ_{\cD}$ on $\cD$ described in Corollary \ref{corollary:topologygeneratedondense} is called \textit{the induced topology on $\cD$} and a pair $(\cD,\cJ_{\cD})$ is called \textit{a dense subsite of $(\cC,\cJ)$}.
\end{definition}

\begin{corollary}\label{corollary:sievesondense}
Let $(\cC,\cJ)$ be a site and $\cD$ be its dense subcategory. Fix an object $X$ of $\cD$ and a sieve $T$ in $\cJ(X)$. Then $T\cap \cD$ is in $\cJ_{\cD}(X)$.
\end{corollary}
\begin{proof}
By Proposition \ref{proposition:densesubcategoriescharacterization} we derive that there exists a sieve $R$ in $\cJ(X)$ contained in $T$ and generated by morphisms in $\cD$. Now a sieve in $\cC$ generated by $T\cap \cD$ contains $R$ and hence is an element of $\cJ(X)$ according to Proposition \ref{proposition:coveringsievesproperties}.
\end{proof}

\begin{theorem}\label{theorem:densesubcategoriesandsheaves}
Let $\left(\cC,\cJ\right)$ be a site and $\cD\subseteq \cC$ be a dense subcategory. Then the embedding $\cD \hookrightarrow \cC$ induces a full and faithful functor
$$\Sh(\cC,\cJ)\ra \Sh(\cD,\cJ_{\cD})$$
Moreover, if for every object $X$ of $\cC$ there exists a covering sieve $S$ in $\cJ(X)$ generated by a set of morphisms with domains in $\cD$, then this functor is an equivalence of categories.
\end{theorem}
\noindent
The proof is a bit technical and for clarity we divide it into lemmas that encapsulate main steps of the argument. First we need to introduce some notation. The functor $\Sh(\cC,\cJ)\ra \Sh(\cD,\cJ_{\cD})$ is the restriction of the functor from the category of big presheaves on $\cC$ to the big presheaves on $\cD$ induced by the inclusion $\cD\hookrightarrow \cC$. We denote values of this functor by $(-)_{\mid \cD}$, where placeholder $-$ stands either for a big presheaf in $\cC$ or for a morphism of such presheaves.

\begin{proof}[Proof of the fact that the functor is full and faithful]
Suppose that $S$ covering sieve on some object $X$ of $\cC$ is generated by $S\cap \cD$. Let $F, G$ be sheaves on $(\cC,\cJ)$ and let $\tau:F_{\mid \cD}\ra G_{\mid \cD}$ be a morphism of presheaves. Then $\tau$ induces map $\tau_S:F(S\cap \cD)\ra G(S\cap \cD)$. Indeed, if $S\cap \cD = \big\{f_i:X_i\ra X\big\}_{i\in I}$, then we have a commutative square
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=4em,text height=1.5ex, text depth=0.25ex] 
{\prod_{i\in I}F(X_i)          & \prod_{i\in I}G(X_i)       \\
 F(S\cap \cD)                      & G(S\cap \cD)                   \\} ;
\path[->,line width= 0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ \prod_{i\in I}\tau_{X_i} $} (m-1-2)
(m-2-1) edge node[below] {$\tau_S $} (m-2-2);
\path[right hook ->,line width= 0.8pt,font=\scriptsize]
(m-2-1) edge node[left] {$ $} (m-1-1)
(m-2-2) edge node[right] {$ $} (m-1-2);
\end{tikzpicture}
\end{center}
where vertical injections are canonical. Since $F$, $G$ are sheaves on $(\cC,\cJ)$, we derive by Proposition \ref{proposition:matchingfamiliesaskernels} that $F(S\cap \cD)$ and $G(S\cap \cD)$ can be identified with $F(X)$ and $G(X)$, respectively. Thus $\tau$ induces a map $\tau_X:F(X)\ra G(X)$. Morphism $\tau_X$ does not depend on the choice of a covering sieve $S$ on $X$ generated by $S\cap \cD$. This is a consequence of definition of dense subcategories (or if you prefer Proposition \ref{proposition:densesubcategoriescharacterization}), since for any two sieves of this type one can find a third sieve of this type contained in their intersection. Thus the meaning of the symbol $\tau_X$ for an object $X$ already in $\cD$ is unambiguous, which follows from applying the definition above to the maximal sieve on $X$. Now suppose that $f:X\ra Y$ is a morphism in $\cC$ and $S, R$ are covering sieves in $\cC$ on $X$, $Y$, respectively. Assume that $S, R$ are generated by $S\cap \cD, R\cap \cD$, respectively and $S\subseteq f^*R$. We have a commutative diagram
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=5em,text height=1.5ex, text depth=0.25ex] 
{F(R\cap \cD)                                        &    G(R\cap \cD)                                             \\
 F(S\cap \cD)                                        &    G(S\cap \cD)                                               \\} ;
\path[->,line width= 0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$\tau_R $} (m-1-2)
(m-2-1) edge node[below] {$\tau_S $} (m-2-2)
(m-1-1) edge node[left] {$ $} (m-2-1)
(m-1-2) edge node[right] {$ $} (m-2-2);;
\end{tikzpicture}
\end{center}
in which the left hand side vertical arrow is given by
$$F(R\cap \cD)\ni \{x_h\}_{h\in R\cap \cD}\mapsto \{y_g\}_{g\in S\cap \cD} \in F\left(S\cap \cD\right)$$
where $y_g = x_{f\cdot g}$ for $g\in S\cap \cD$ and analogically we define right hand side vertical arrow. This diagram implies that $\tau_X\cdot F(f) = F(f)\cdot \tau_Y$ by Proposition \ref{proposition:matchingfamiliesaskernels}. This extends $\tau:F\cap \cD\ra G\cap \cD$ to a morphism of sheaves $F\ra G$. This extension is unique by its definition.
\end{proof}
\noindent
Suppose that $X$ is an object of $\cC$. Since a sieve $S$ on $X$ in $\cC$ can be identified with a big subpresheaf of big presheaf $h_X$, the restriction $S_{\mid \cD}$ makes sense. Note also that if $X$ is an object of $\cD$, then $\left(h_X\right)_{\mid \cD} = k_X$, where $k_X$ denotes big presheaf on $\cD$ of morphisms into $X$. 

\begin{lemma}\label{lemma:extensionofmorphismsforsheavesinsubcategory}
Let $F$ be a sheaf on $(\cD,\cJ_{\cD})$. Consider an object $X$ of $\cC$ and a covering sieve $S$ in $\cJ(X)$. Then for every morphism $\sigma:S_{\mid \cD}\ra F$ there exists a unique morphism $\tilde{\sigma}:\left(h_X\right)_{\mid \cD}\ra F$ making the following diagram commutative.
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ \left(h_X\right)_{\mid \cD}&       F  \\
   S_{\mid \cD} &          \\} ;
\path[densely dotted, ->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ \tilde{\sigma} $} (m-1-2);
\path[left hook ->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[left] {$ $} (m-1-1);
\path[->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[below = 3pt, right = 1pt] {$ \sigma $} (m-1-2);
\end{tikzpicture}
\end{center}
\end{lemma}
\begin{proof}[Proof of the lemma]
Fix $\sigma:S_{\mid \cD}\ra F$. Next fix a morphism $f:Y\ra X$ in $\cC$ with $Y$ in $\cD$. Then we have a morphism
$$\left(f^*S\right)_{\mid \cD}\ni g\mapsto f\cdot g\in S_{\mid \cD}$$
of big presheaves on $\cD$. We denote the composition of this morphism with $\sigma$ by $\sigma_f$. Thus $\sigma_f:\left(f^*S\right)_{\mid \cD}\ra F$ is a morphism of presheaves. Since $F$ is a sheaf on $(\cD,\cJ_{\cD})$ and $f^*S\cap \cD\in \cJ_{\cD}(Y)$ by Corollary \ref{corollary:sievesondense}, we derive that there exists a unique morphism $\tilde{\sigma}_f:k_{Y}\ra F$ such that
the triangle
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ k_{Y} &       F  \\
  \left(f^*S\right)_{\mid \cD} &          \\} ;
\path[densely dotted, ->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ \tilde{\sigma}_f $} (m-1-2);
\path[left hook ->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[left] {$ $} (m-1-1);
\path[->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[below = 3pt, right = 1pt] {$ \sigma_f $} (m-1-2);
\end{tikzpicture}
\end{center}
is commutative. We define $\tilde{\sigma}:\left(h_X\right)_{\mid \cD}\ra F$ by formula $\tilde{\sigma}(f) = \tilde{\sigma}_f(1_Y)$. Then $\tilde{\sigma}$ satisfies conditions in the statement.
\end{proof}
\noindent
Let $F$ be a presheaf on $\cD$. Suppose that for every object $X$ in $\cC$ the class $\Mor_{\cD}\left(\left(h_X\right)_{\mid \cD},F\right)$ (of morphisms of big presheaves) is a set. Then we denote the presheaf $X\mapsto \Mor_{\cD}\left(\left(h_X\right)_{\mid \cD},F\right)$ on $\cC$ by $\tilde{F}$. If $X$ is in $\cD$, then we have a bijection
$$\Mor_{\cD}\left(\left(h_X\right)_{\mid \cD},F\right) = \Mor_{\cD}\left(k_X , F\right)\ni \tau \mapsto \tau(1_X)\in F(X)$$
This bijection is natural in object $X$ of $\cD$ and hence $\tilde{F}_{\mid \cD}$ can be identified with $F$. This defines an isomorphism $\xi_F:\tilde{F}_{\mid \cD}\ra F$.

\begin{lemma}\label{lemma:counitandsection}
Let $F$ be a presheaf on $\cD$ and let $X$ be an object of $\cD$. Suppose that for every object $X$ in $\cC$ the class $\Mor_{\cD}\left(\left(h_X\right)_{\mid \cD},F\right)$ is a set. Fix a morphism $\phi:k_X\ra \tilde{F}_{\mid \cD}$ of big presheaves. Then $\xi_F\cdot \phi = \phi(1_X)$.
\end{lemma}
\begin{proof}[Proof of the lemma]
We denote $\phi(1_X)$ by $\tau$. Then for every morphism $f:Y\ra X$ in $\cD$ we have
$$\left(\xi_{F}\cdot \phi\right)(f) = \xi_F\left(\phi(f)\right) = \xi_F\left(\tau\cdot \left(h_f\right)_{\mid \cD}\right) = \left(\tau\cdot \left(h_f\right)_{\mid \cD}\right)(1_Y) = \tau(f)$$
and hence $\xi_F\cdot \phi = \tau$.
\end{proof}

\begin{lemma}\label{lemma:extensionofsheafissheaf}
Let $F$ be a sheaf on $(\cD,\cJ_{\cD})$. Suppose that for every object $X$ in $\cC$ the class $\Mor_{\cD}\left(\left(h_X\right)_{\mid \cD},F\right)$ is a set. Then the presheaf $\tilde{F}$ on $\cC$ is a sheaf on $(\cC,\cJ)$.
\end{lemma}
\begin{proof}[Proof of the lemma]
Fix object $X$ in $\cC$ and a sieve $S$ in $\cJ(X)$. Assume that $S$ is generated by morphisms with domain in $\cD$. Consider a morphism $\sigma:S\ra \tilde{F}$. Then $\sigma_{\mid \cD}:S_{\mid \cD}\ra \tilde{F}_{\mid \cD}$ composed with the identification $\xi_F:\tilde{F}_{\mid \cD}\ra F$ gives rise to a morphism $\tau:S_{\mid \cD}\ra F$. According to Lemma \ref{lemma:extensionofmorphismsforsheavesinsubcategory} we derive that there exists $\tilde{\tau}:\left(h_X\right)_{\mid \cD}\ra F$ that extends $\tau$. Now suppose that $f:Y\ra X$ is a morphism in $S$ with $Y$ an object of $\cD$. Let $i_f:k_Y\ra S_{\mid \cD}$ be a morphism determined by $f$ and let $i:S\hookrightarrow h_X$ be the inclusion. Note that $\left(h_f\right)_{\mid \cD} = i_{\mid \cD}\cdot i_f$. We have (one step in the chain below requires Lemma \ref{lemma:counitandsection})
$$\tilde{F}(f)\left(\tilde{\tau}\right) =\tilde{\tau}\cdot \left(h_f\right)_{\mid \cD} = \tilde{\tau}\cdot i_{\mid \cD}\cdot i_{f} = \tau\cdot i_{f} = \xi_F\cdot \sigma_{\mid \cD}\cdot i_f = \left( \sigma_{\mid \cD}\cdot i_f \right)(1_Y) = \sigma_{\mid \cD}(f) = \sigma(f)$$
The fact that this equality holds for every $f:Y\ra X$ with $Y$ in $\cD$ implies that $\tilde{\tau}$ is an amalgamation of a matching family $\sigma$ and moreover, it shows that it is a unique amalgamation.\\
Now we proceed as in the proof of Theorem \ref{theorem:sheavesintermsofkernels}. Consider any sieve $R$ in $\cJ(X)$. Then by definition of dense subcategories (or Proposition \ref{proposition:densesubcategoriescharacterization}) there exists a sieve $S$ on $X$ generated by morphisms with domains in $\cD$ such that $S\subseteq R$. Consider a commutative triangle
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=2em, column sep=1em,text height=1.5ex, text depth=0.25ex] 
{ \tilde{F}(R)&      &  \tilde{F}(S)  \\
      &\tilde{F}(X)&          \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ \mathrm{res}_{R,S} $} (m-1-3)
(m-2-2) edge node[below = 3pt, left = 1pt] {$ \mathrm{res}_{R} $} (m-1-1)
(m-2-2) edge node[below = 3pt, right = 1pt] {$ \mathrm{res}_{S} $} (m-1-3);
\end{tikzpicture}
\end{center}
where $\mathrm{res}_{R,S}$ is the restriction of matching families, $\mathrm{res}_{R}$ and $\mathrm{res}_{S}$ send elements of $\tilde{F}(X)$ to matching families on $R$ and $S$, respectively. By what we prove above we deduce that $\mathrm{res}_S$ is a bijection. Hence $\mathrm{res}_R$ is injective. Thus $\tilde{F}$ is a separated presheaf with respect to $\cJ$. By Proposition \ref{proposition:separatdpresheavesinduceinjections} the map $\mathrm{res}_{R,S}$ is injective. Therefore, $\mathrm{res}_{R,S}$, $\mathrm{res}_R$ are injective and $\mathrm{res}_S$ is bijective and they form a commutative triangle. Hence they are all bijective maps of classes. In particular, $\mathrm{res}_R$ is bijective. We deduce that $\tilde{F}$ is a sheaf with respect to $\cJ$.
\end{proof}

\begin{proof}[Proof of the fact that the functor is essentially surjective under additional assumption]
Suppose that every object $X$ in $\cC$ admits a covering sieve $S$ in $\cJ(X)$ generated by a set of morphisms with domains in $\cD$. Fix $X$ in $\cC$ and a sheaf $F$ on $\left(\cD,\cJ_{\cD}\right)$. Let $\cF = \big\{f_i:X_i\ra X\big\}_{i\in I}$ be a set of morphisms generating some covering sieve $S\in \cJ(X)$. Then $\Mor_{\cD}\left(S_{\mid \cD},F\right)$ is a set and by Lemma \ref{lemma:extensionofmorphismsforsheavesinsubcategory} we deduce that $\Mor_{\cD}\left(\left(h_X\right)_{\mid \cD},F\right)$ is a set. Therefore, for every sheaf $F$ on $\left(\cD,\cJ_{\cD}\right)$ presheaf $\tilde{F}$ exists. By Lemma \ref{lemma:extensionofsheafissheaf} it is a sheaf on $\left(\cC,\cJ\right)$ such that $\xi_{F}:\tilde{F}_{\mid \cD}\ra F$ is an isomorphism. Thus the functor
$$\Sh(\cC,\cJ)\ra \Sh(\cD,\cJ_{\cD})$$
is essentially surjective.
\end{proof}

\section{Sheaf associated to a presheaf}

\begin{definition}
Let $\cC$ be a category and let $\cJ$ be a Grothendieck topology on $\cC$. Suppose that for every object $X$ of $\cC$ there exists a set $\cS$ of covering sieves on $X$ such that for every covering sieve $R$ in $\cJ(X)$ there exists $S$ in $\cS$ contained in $R$ and every $S$ in $\cS$ is generated by some set of morphisms. Then $\cJ$ is called \textit{a locally small Grothendieck topology on $\cC$}.
\end{definition}

\begin{fact}
Let $\cC$ be a category and $\cK$ be a Grothendieck pretopology on $\cC$. Suppose that for every $X$ in $\cC$ the class $\cK(X)$ is a set and every member of $\cK(X)$ consists of a set of arrows. Then the Grothendieck topology generated by $\cK$ is locally small.
\end{fact}
\begin{proof}
Left to the reader.
\end{proof}

\begin{definition}
Let $(\cC,\cJ)$ be a Grothendieck site. Let $F$ be a presheaf on $\cC$. Suppose that $a(F)$ is a sheaf on $(\cC,\cJ)$ and $\eta_F:F \ra a(F)$ is a morphism of presheaves such that for every sheaf $G$ on $(\cC,\cJ)$ and every morphism of presheaves $p:F \ra G$ there exists a unique morphism $r:a(F)\ra G$ making the diagram
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ a(F)& G   \\
  F   &    \\} ;
\path[->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[above] {$r $} (m-1-2)
(m-2-1) edge node[left]  {$\eta_F $} (m-1-1) 
(m-2-1) edge node[below = 8pt, right = -5pt]  {$p $} (m-1-2);
\end{tikzpicture}
\end{center}
commutative. Then $a(F)$ is called \textit{a sheaf on $(\cC,\cJ)$ associated to a presheaf $F$}.
\end{definition}
\noindent
Let $(\cC,\cJ)$ be a Grothendieck site and suppose that for every presheaf $F$ on $\cC$ there exists an associated sheaf $\left(a(F),\eta_F\right)$ on $(\cC,\cJ)$. Consider a morphism of presheaves $\sigma:F\ra G$ on $\cC$. Then there exists a unique morphism $a(\sigma):a(F)\ra a(G)$ of sheaves on $(\cC,\cJ)$ such that the square
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ a(F)& a(G)   \\
  F   & G   \\} ;
\path[->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[above] {$a(\sigma) $} (m-1-2)
(m-2-1) edge node[left]  {$\eta_F $} (m-1-1) 
(m-2-1) edge node[below]  {$\sigma $} (m-2-2)
(m-2-2) edge node[right]  {$\eta_G $} (m-1-2);
\end{tikzpicture}
\end{center}
is commutative. This gives rise to a functor $a:\widehat{\cC}\ra \Sh(\cC,\cJ)$. This functor is left adjoint functor to the inclusion $\Sh(\cC,\cJ)\hookrightarrow \widehat{\cC}$ and for every presheaf $F$ morphism $\eta_F$ becomes unit of this adjuntion. This is an instance of the general categorical principle c.f. {\cite[page 83, Theorem 2]{Maclane}}.\\
Now we are ready to state and prove the main result of this section.

\begin{theorem}\label{theorem:associatedsheaf}
Let $(\cC,\cJ)$ be a Grothendieck site and assume that $\cJ$ is a locally small Grothendieck topology. Then for every presheaf $F$ on $\cC$ there exists an associated sheaf $\left(a(F),\eta_F\right)$ on $(\cC,\cJ)$. Moreover, the following assertions hold.
\begin{enumerate}[label=\emph{\textbf{(\arabic*)}}, leftmargin=1.5em]
\item If $F$ is separated presheaf, then $\eta_F$ is a monomorphism of presheaves.
\item The functor $a:\widehat{\cC}\ra \Sh\left(\cC,\cJ\right)$ preserves finite limits.
\end{enumerate}
\end{theorem}
\noindent
First we construct a separated presheaf $F^+$ out of $F$. Fix an object $X$ of $\cC$. Suppose that $S$ is a covering sieve on $X$. Denote by $F(S)$ the set of all matching families for $S$ of elements of $F$. If $S_1\subseteq S_2$ are covering sieves on $X$, then we have a map $F(S_2)\ra F(S_1)$ given by the restriction. Thus $\{F(S)\}_{S\in \cJ(X)}$ is a diagram indexed by a directed class $\cJ(X)$ and we define
$$F^+(X)=\mathrm{colim}_{S\in \cJ(X)}F(S)$$
Note that for every morphism $f:X_1\ra X_2$ in $\cC$ and for every sieve $S\in \cJ(X_2)$ we have a function $F(S)\ra F(f^*S)$ given by $F(S)\ni \{s_g\}_{g\in S}\mapsto \{s_{f\cdot g}\}_{g\in f^*S}\in F(f^*S)$. These functions for all $S\in \cJ(X_2)$ induce a map
$$F^+(X_2)\ra F^+(X_1)$$
According to the fact that $\cJ$ is locally small we deduce that directed class $\cJ(X)$ contains confinal directed set consisting of sieves generated by sets of morphisms in $\cC$. For such sieves $S$ the class $F(S)$ is a set. Thus $F^+(X)$ is a set for every $X$ in $\cC$ and hence $F^+$ is a presheaf on $\cC$. We also have a morphism of presheaves $i_F^+:F\ra F^+$ that sends $x\in F(X)$ to a class in $F^+(X)$ represented by a matching family of the form $\{F(f)(x)\}_{f\in S}$ for every covering sieve $S$ on $X$.

\begin{lemma}\label{lemma:plusconstruction}
The following assertions hold.
\begin{enumerate}[label=\emph{\textbf{(\arabic*)}}, leftmargin=1.5em]
\item $F^+$ is a separated presheaf.
\item If $F$ is separated presheaf, then $F^+$ is a sheaf and morphism $i^+_F:F\ra F^+$ is a monomorphism of presheaves.
\item If $F$ is a sheaf, then $i^+_F$ is an isomorphism of presheaves.
\end{enumerate}
\end{lemma}
\begin{proof}[Proof of the lemma]
We prove \textbf{(1)}. Fix an object $X\in \cC$ and a covering sieve $S$ on $X$. Suppose that $\{x_f\}_{f\in S}$ is a matching family for $S$ of elements of $F^+$. Assume that $y$, $z\in F^+(X)$ are amalgamations of $\{x_f\}_{f\in S}$. Then there exists a covering sieve $T$ on $X$ such that $y$ is represented by some matching family $\{s_f\}_{f\in T}$ for $T$ of elements of $F$ and $z$ is represented by some matching family $\{t_f\}_{f\in T}$ for $T$ of elements of $F$. Fix a morphism $f:Y\ra X$ in $S$. Then $F^+(f)(y)$ is represented by $\{s_{f\cdot g}\}_{g\in f^*T}$ and $F^+(f)(z)$ is represented by $\{t_{f\cdot g}\}_{g\in f^*T}$. Moreover, $F^+(f)(y)=x_f=F^+(f)(z)$ and hence there exists a covering sieve $R_f$ on $Y$ such that $R_f\subseteq f^*T$ and $s_{f\cdot g}=t_{f\cdot g}$ for every $g\in R_f$. Now we know that 
$$R=\bigcup_{f\in T}f\cdot R_f\subseteq S$$
is a covering sieve on $X$ and matching families $\{s_f\}_{f\in R}$, $\{t_f\}_{f\in R}$ for $R$ of elements of $F$ represent respectively $y$ and $z$. Since these families are equal, we derive that $y=z$. This implies that $F^+$ is separated.\\
Let us prove \textbf{(2)}. Fix an object $X\in \cC$ and a covering sieve $S$ on $X$. Suppose that $\{x_f\}_{f\in S}$ is a matching family for $S$ of elements of $F^+$. For every $f:Y\ra X$ in $S$ there exists a covering sieve $R_f$ on $Y$ and a matching family $\{s(f)_g\}_{g\in R_f}$ for $R_f$ of elements of $F$ that represents $x_f$. Formula
$$R=\bigcup_{f\in S}f\cdot R_f$$
defines a covering sieve on $X$ contained in $S$. We set $r_{f\cdot g}=s(f)_g$ for every $f\in S$ and $g\in R_f$. We check now that this definition is independent of choices of $f\in S$ and $g\in R_f$. For this suppose that $f_1$, $f_2\in S$ and $g_1\in R_{f_1}$, $g_2\in R_{f_2}$ satisfy $f_1\cdot g_1=f_2\cdot g_2$. Let $Z\in \cC$ denote a common domain of morphisms $g_1$, $g_2$. Now $F^+(g_1)(x_{f_1})$ is represented by a matching family $\{s(f_1)_{g_1\cdot g}\}_{\mathrm{cod}(g)=Z}$ and $F^+(g_2)(x_{f_2})$ is represented by a matching family $\{s(f_2)_{g_2\cdot g}\}_{\mathrm{cod}(g)=Z}$. According to equality
$$F^+(g_1)(x_{f_1})=x_{f_1\cdot g_1}=x_{f_2\cdot g_2}=F^+(g_2)(x_{f_2})$$
these families represent the same element of $F^+(Z)$. Hence we deduce that there exists a covering sieve $T$ on $Z$ such that $\{s(f_1)_{g_1\cdot g}\}_{g\in T}=\{s(f_2)_{g_2\cdot g}\}_{g\in T}$. Next $s(f_1)_{g_1}$ is an amalgamation for $\{s(f_1)_{g_1\cdot g}\}_{g\in T}$ and $s(f_2)_{g_2}$ is an amalgamation for $\{s(f_2)_{g_2\cdot g}\}_{g\in T}$. By separatedness of $F$, we derive that $s(f_1)_{g_1}=s(f_2)_{g_2}$. Thus family $\{r_f\}_{f\in R}$ is well defined. By definition it is a matching family for $R$ of elements of $F$. Hence it defines an element of $F(R)$ and this element represents some $x\in F^+(X)$. Fix now $f\in S$. By definition of $F^+$ we deduce that $F^+(f)(x)$ is represented by $\{r_{f\cdot g}\}_{g\in f^*R}$. This family contains $\{r_{f\cdot g}\}_{g\in R_f}=\{s(f)_{g}\}_{g\in R_f}$ and thus $F^+(f)(x)=x_f$. This proves that $\{x_f\}_{f\in S}$ admits an amalgamation. By \textbf{(1)} presheaf $F$ is separated. Hence amalgamation of $\{x_f\}_{f\in S}$ is unique. Now we prove that $i^+_F$ is a monomorphism of presheaves. Since $F$ is separated, for every object $X$ in $\cC$ and $x\in F(X)$ and for every covering sieve $S$ in $\cJ(X)$ element $x$ is uniquely determined by $\{F(f)(x)\}_{f\in S}$. Thus morphism $i^+_F$ that sends $x$ to a class in $F^+(X)$ represented by a matching family $\{F(f)(x)\}_{f\in S}$ is a monomorphism.\\
Now we prove \textbf{(3)}. According to \textbf{(2)} we know that $i^+_F$ is a monomorphism of presheaves. Thus it suffices to note that for every object $X$ of $\cC$ and for every class in $F^+(X)$ there exists an element $x\in F(X)$ such that $i^+_F(x)$ is precisely that class. This follows easily from the fact that each matching family for a covering sieve in $\cJ(X)$ of elements of $F$ admits an amalgamation.
\end{proof}

\begin{lemma}\label{lemma:universalpropertyofplusconstruction}
Let $p:F\ra G$ be a morphism of presheaves and assume that $G$ is a sheaf. Then there exists a unique morphism $q:F^+\ra G$ such that the diagram
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ F^+& G   \\
  F   &    \\} ;
\path[->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[above] {$q $} (m-1-2)
(m-2-1) edge node[left]  {$i^+_F $} (m-1-1) 
(m-2-1) edge node[below = 8pt, right = -5pt]  {$p $} (m-1-2);
\end{tikzpicture}
\end{center}
is commutative.
\end{lemma}
\begin{proof}[Proof of the lemma]
Fix $X\in \cC$ and $x\in F^+(X)$. Then there exists a covering sieve $S$ on $X$ and a matching family $\{s_f\}_{f\in S}$ for $S$ of elements of $F$ that represents $x$. By definitions of $F^+$ and $i_F^+$ we have matching family $\{i_F^+(s_f)\}_{f\in S}$ for $S$ of elements of $F^+$ with $x$ as its amalgamation.
Assume that $q:F^+\ra G$ is a morphism such that $p=q\cdot i^+_F$.  We have $p(s_f)=q(i_F^+(s_f))$ for every $f\in S$. Therefore, $q(x)$ must be an amalgamation of a matching family $\{p(s_f)\}_{f\in S}=\{q(i^+_F(s_f))\}_{f\in S}$ for $S$ of elements of $G$. Since $G$ is a separated presheaf, there exists at most one such amalgamation. This proves uniqueness of $q$. The existence of such $q$ is also evident. As $G$ is a sheaf, one picks $q(x)$ to be the amalgamation of a matching family $\{p(s_f)\}_{f\in S}$ for $S$ of elements of $G$. Verification that uses definitions of $F^+$ and $i^+_F$ shows that this gives rise to a morphism $q:F^+\ra G$ which satisfies $p=q\cdot i^+_F$.
\end{proof}
\noindent
Next suppose that $\sigma:F\ra G$ is a morphism of presheaves on $\cC$. There exists a morphism $\sigma^+$ such that the square
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ F^+ & G^+   \\
  F   & G   \\} ;
\path[->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[above] {$\sigma^+ $} (m-1-2)
(m-2-1) edge node[left]  {$i^+_F $} (m-1-1) 
(m-2-1) edge node[below]  {$\sigma $} (m-2-2)
(m-2-2) edge node[right]  {$i^+_G $} (m-1-2);
\end{tikzpicture}
\end{center}
is commutative. We describe $\sigma^+$ explicitly. For this note that if $X$ is an object of $\cC$ and $S$ is a covering sieve on $X$, then $\sigma$ induces a map $F(S)\ra G(S)$ and such maps in turn induce a map $F^+(X)\ra G^+(X)$. This is exactly how $\sigma^+$ is defined. Note also that this gives rise to an endofunctor $(-)^+$ on the category $\widehat{\cC}$.

\begin{lemma}\label{lemma:pluscontructionpreservesfinitelimits}
The functor $(-)^+:\widehat{\cC}\ra \widehat{\cC}$ preserves finite limits. 
\end{lemma}
\begin{proof}[Proof of the lemma]
Let $S$ be a covering sieve on some object $X$ of $\cC$ and assume that $S$ is generated by a set of morphisms. We view $S$ as a big presheaf on $\cC$ and we define a functor
$$\widehat{\cC}\ni F\mapsto F(S)\in \Set$$
Note that, since $S$ is generated by a set of morphisms, this is a functor with values in $\Set$. We denote this functor by $\bd{ev}_S$. Next we denote by $\bd{ev}_X:\widehat{\cC}\ra \Set$ the functor that evaluates presheaves on $X$. According to the fact that $\cJ$ is locally small Grothendieck topology, we derive that $\bd{ev}_X\cdot (-)^+$ is a colimit of functors of the form $\bd{ev}_S$ for covering sieves $S$ on $X$ generated by sets of morphisms. In order to show that $(-)^+$ preserves finite limits it suffices to show (by {\cite[Corollary 3.5]{Presheaves}}) that $\bd{ev}_X\cdot (-)^+$ preserves finite limits for every $X$ in $\cC$. Hence by previous analysis and the fact that colimits over directed sets preserve finite limits {\cite[page 215, Theorem 1]{Maclane}} it suffices to show that $\bd{ev}_S$ preserves finite limits for every $X\in \cC$ and every covering sieve $S$ on $X$ generated by a set of morphisms. This follows from the fact that for every object $X$ of $\cC$ and every sieve $S$ on $X$ generated by a set of morphisms functor $\bd{ev}_S$ can be also described as a functor $F\mapsto \Mor_{\cC}(S,F)$, where $S$ is interpreted as a possibly big presheaf on $\cC$. This last functor clearly preserves all limits in $\widehat{\cC}$. 
\end{proof}

\begin{proof}[Proof of the theorem]
We define $a(F)=\left(F^+\right)^+$ and $\eta_F=i^+_{F^+}\cdot i^+_F$. By Lemma \ref{lemma:plusconstruction} presheaf $a(F)$ is a sheaf. Now suppose that $p:F\ra G$ is a morphism of presheaves and $G$ is a sheaf. We apply Lemma \ref{lemma:universalpropertyofplusconstruction} twice to obtain a unique morphism $r:a(F)\ra G$ such that $p=r\cdot \eta_F$. If $F$ is a separated presheaf, then $F^+$ is a sheaf and hence by \textbf{(3)} of Lemma \ref{lemma:plusconstruction}, we deduce that $i^+_{F^+}$ is an isomorphism of presheaves. By \textbf{(2)} of the same Lemma, we derive that $i^+_F$ is a monomorphism of presheaves and hence the composition $\eta_F = i^+_{F^+}\cdot i^+_F$ is also a monomorphism of presheaves. Thus we proved the main part of the statement and also \textbf{(1)}. For \textbf{(2)} note that  $(-)^+\cdot (-)^+:\widehat{\cC}\ra \widehat{\cC}$ preserves finite limits by Lemma \ref{lemma:pluscontructionpreservesfinitelimits}. Now $a:\widehat{\cC}\ra \Sh(\cC,\cJ)$ composed with the inclusion $\Sh(\cC,\cJ)\hookrightarrow \widehat{\cC}$ is precisely $(-)^+\cdot (-)^+$. Hence the fact that $a$ preserves finite limits follows from Theorem \ref{theorem:limitsinsheavesandseparatedpresheaves}.
\end{proof}

\section{Subobject classifiers}

\begin{definition}
Let $(\cC,\cJ)$ be a Grothendieck site. Suppose that $X$ is an object of $\cC$ and $S$ is a sieve on $X$ such that for every morphism $f:Y\ra X$ in $\cC$ if $f^*S$ is a covering sieve, then $f$ is in $S$. Then a sieve $S$ is called \textit{a closed sieve on $X$}.
\end{definition}

\begin{fact}\label{fact:closedsievesarestableunderintersection}
Let $(\cC,\cJ)$ be a Grothendieck site and let $X$ be an object of $\cC$. The intersection of a collection of closed sieves on $X$ is a closed sieve on $X$.
\end{fact}
\begin{proof}
By Fact \ref{fact:propertiesofsieves} the intersection of any collection of sieves on $X$ is a sieve on $X$. Suppose now that $\cS$ is a collection of closed sieves on $X$. Assume that $f$ is a morphism with $X$ as a codomain and assume that $f^*\left(\bigcap_{S\in \cS}S\right)$ is a covering sieve. Then $f^*S$ is a covering sieve for every $S\in \cS$ and hence $f\in S$ for every $S\in \cS$. Thus $f\in \bigcap_{S\in \cS}S$. Therefore, $\bigcap_{S\in \cS}S$ is a closed sieve on $X$.
\end{proof}
\noindent
Let $(\cC,\cJ)$ be a Grothendieck site. First note that if $f:X\ra Y$ is a morphism in $\cC$ and $S$ is a closed sieve on $Y$, then $f^*S$ is a closed sieve on $X$. Using this remark we describe now a construction of certain big presheaf on $\cC$ associated with the Grothendieck topology $\cJ$. For every object $X$ in $\cC$ we define $\Omega(X)$ as a class of all closed sieves on $X$. If $f:X\ra Y$ is a morphism in $\cC$, then we define a map $\Omega(f):\Omega(Y)\ra \Omega(X)$ by formula $\Omega(Y)\ni S\mapsto f^*S\in \Omega(X)$. Finally note that if $\bd{1}$ is a terminal presheaf on $\cC$ (that is any presheaf that takes singleton as a value for every object of $\cC$), then there exists a morphism $t:\bd{1}\ra \Omega$ of big presheaves that for every $X$ in $\cC$ picks the maximal sieve $t_X$ on $X$ in $\Omega(X)$ (the maximal sieve is closed with respect to any Grothendieck topology).\\
Next theorem states important properties of $\Omega$.

\begin{theorem}\label{theorem:subobjectclassifierissheaf}
Let $(\cC,\cJ)$ be a Grothendieck site and let $\Omega$ be a big presheaf defined above. Then for every object $X$ of $\cC$, every covering sieve $S$ on $X$ (viewed below as a big presheaf on $\cC$) and for every morphism of big presheaves $m:S\ra \Omega$ there exists a unique morphism $p:h_X\ra \Omega$ such that the following triangle is commutative.
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ h_X&       F  \\
   S &          \\} ;
\path[densely dotted, ->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ p $} (m-1-2);
\path[left hook ->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[left] {$ $} (m-1-1);
\path[->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[below = 5pt, right = -2pt] {$m $} (m-1-2);
\end{tikzpicture}
\end{center}
\end{theorem}
\noindent
Let $(\cC,\cJ)$ be a Grothendieck site. According to Fact \ref{fact:closedsievesarestableunderintersection} we derive that for every sieve $T$ on some object $X$ of $\cC$ there exists the smallest (with respect to inclusion) closed sieve on $X$ that contains $T$. We call it the closure of $T$ and denote by $\bd{cl}(T)$.

\begin{lemma}\label{lemma:closuredescribed}
Let $(\cC,\cJ)$ be a Grothendieck site and let $X$ be an object of $\cC$. Suppose that $T$ is a sieve on $X$. Then
$$\bd{cl}(T) = \big\{f\,\big|\,f\mbox{ is a morphism in }\cC\mbox{ with }X\mbox{ as the codomain and }f^*T\mbox{ is a covering sieve}\big\}$$
\end{lemma}
\begin{proof}[Proof of the lemma]
We write
$$R = \big\{f\,\big|\,f\mbox{ is a morphism in }\cC\mbox{ with }X\mbox{ as codomain and }f^*T\mbox{ is a covering sieve}\big\}$$
We have $T\subseteq R\subseteq \bd{cl}(T)$. Hence it suffices to prove that $R$ is a closed sieve on $X$. If $f\in R$ and $g$ is a morphism in $\cC$ such that $\mathrm{dom}(f) = \mathrm{cod}(g)$, then $f^*T$ is a covering sieve and thus $(f\cdot g)^*T = g^*\left(f^*T\right)$ is a covering sieve. This implies that $f\cdot g\in R$ and $R$ is a sieve. Let us verify that $R$ is a closed. For this assume that $f^*R$ is a covering sieve for some morphism $f$ in $\cC$ with $X$ as the codomain. For every $g\in f^*R$ we deduce that $f\cdot g\in R$ and hence $g^*\left(f^*T\right)$ is a covering sieve. The sieve
$$\bigcup_{g\in f^*R}g\cdot \left(g^*\left(f^*T\right)\right)$$
is a covering sieve by Fact \ref{fact:compositionofcoveringsieves}. Note that it is contained in $f^*T$. Theorefore, $f^*T$ is a covering sieve. This implies that $f\in R$ and $R$ is closed.
\end{proof}

\begin{lemma}\label{lemma:pullbackofclosureisclosure}
Let $(\cC,\cJ)$ be a Grothendieck site and let $X$ be an object of $\cC$. Suppose that $T$ is a sieve on $X$ and pick a morphism $f:Y\ra X$ in $\cC$. Then
$$\bd{cl}\left(f^*T\right) = f^*\left(\bd{cl}(T)\right)$$
\end{lemma}
\begin{proof}[Proof of the lemma]
A sieve $f^*\left(\bd{cl}(T)\right)$ is closed and contains $f^*T$. Hence $\bd{cl}\left(f^*T\right)\subseteq f^*\left(\bd{cl}(T)\right)$. Suppose that $g\in f^*\left(\bd{cl}(T)\right)$. Then $f\cdot g \in \bd{cl}(T)$. Thus by Lemma \ref{lemma:closuredescribed} we derive that $g^*\left(f^*T\right)$ is a covering sieve. Hence again by Lemma \ref{lemma:closuredescribed} we deduce that $g\in \bd{cl}\left(f^*T\right)$. Therefore, $f^*\left(\bd{cl}(T)\right)\subseteq \bd{cl}\left(f^*T\right)$.
\end{proof}

\begin{proof}[Proof of the theorem]
We prove the first part of the statement. Consider a morphism $m:S\ra \Omega$ of big presheaves. For every $f\in S$ element $m(f)$ is a closed sieve on the domain of $f$. Suppose that $V_1$, $V_2$ are closed sieves on $X$ such that $f^*V_1 = m(f) = f^*V_2$ for every $f$ in $S$. Let $g$ be a morphism in $V_1$. Pick $h\in g^*S$ that is $g\cdot h\in S$. Then
$$h^*\left(g^*V_2\right) = (g\cdot h)^*V_2 = m(g\cdot h) = (g\cdot h)^*V_1 = \left(\mbox{the maximal sieve on }\mathrm{dom}(g\cdot h)\right)$$
Thus $h^*\left(g^*T\right)$ is a covering sieve for every $h\in g^*S$. Since $g^*S$ is a covering sieve ($S$ is a covering sieve and covering sieves are stable under pullback), we deduce that $g^*V_2$ is a covering sieve. By \ref{lemma:closuredescribed} we derive that $g\in V_2$. Therefore, $V_1\subseteq V_2$ and by symmetry $V_2\subseteq V_1$. Hence $V_1 = V_2$ and this proves that there is at most one morphism $p:h_X\ra \Omega$ making the triangle in the statement commutative. Now it suffices to construct $p$. We define
$$R = \bigcup_{f\in S}f\cdot m(f)$$
This is a  sieve on $X$. Consider $f \in S$, a morphism $g$ in $\cC$, $f'\in S$ and $g'\in m(f')$ in $\cC$. Assume that $f\cdot g = f'\cdot g'$. Note that
$$\left(\mbox{the maximal sieve on }\mathrm{dom}(g')\right) = g'^*m(f') = m(f'\cdot g') = m(f\cdot g) = g^*m(f) $$
and hence $g^*m(f)$ is a covering sieve on $\mathrm{dom}(g)$. Since $m(f)$ is closed, we derive that $g\in m(f)$. This implies that if $f\cdot g \in R$ for some morphism $g$ in $\cC$ and $f\in S$, then $g\in m(f)$. Thus $f^*R\subseteq m(f)$ for every $f\in S$. Since $f\cdot m(f)\subseteq R$, we also have the converse. Therefore, we derive that $f^*R = m(f)$ for every $f\in S$. Let $f$ be a morphism in $S$. Then by Lemma \ref{lemma:pullbackofclosureisclosure} we have
$$f^*\left(\bd{cl}(R)\right) = \bd{cl}\left(f^*R\right) = \bd{cl}\left(m(f)\right) = m(f)$$
Therefore, the closure $T$ of $R$ is an element of $\Omega(X)$ and the morphism of big presheaves $p:h_X\ra \Omega$ determined by $T$ makes diagram
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ h_X&       F \\
   S &         \\} ;
\path[densely dotted, ->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ p $} (m-1-2);
\path[left hook ->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[left] {$ $} (m-1-1);
\path[->,line width=0.8pt,font=\scriptsize]
(m-2-1) edge node[below = 5pt, right = -2pt] {$m $} (m-1-2);
\end{tikzpicture}
\end{center}
commutative.
\end{proof}

\begin{proposition}\label{proposition:universalpropertyofsubobjectclassifier}
Let $(\cC,\cJ)$ be a Grothendieck site and let $\Omega$ be a big presheaf defined above. If $G$ is a sheaf on $(\cC,\cJ)$ and $A\subseteq G$ is a subsheaf (a subpresheaf which is a sheaf), then there exists a unique morphism $\chi_A:G\ra \Omega$ such that there exists cartesian square
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ A & \bd{1}  \\
  G   & \Omega   \\} ;
\path[->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[above] {$ $} (m-1-2) 
(m-2-1) edge node[below]  {$\chi_A  $} (m-2-2)
(m-1-2) edge node[right]  {$t $} (m-2-2);
\path[right hook ->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[left]  {$  $} (m-2-1);
\end{tikzpicture}
\end{center}
in the category of big presheaves.
\end{proposition}
\begin{proof}
Let $G$ be a sheaf on $(\cC,\cJ)$ and let $A\subseteq G$ be a subsheaf. Our goal is to construct and show uniqueness of $\chi_A$ such that the following square is cartesian in the category of big presheaves.
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ A & \bd{1}  \\
  G   & \Omega   \\} ;
\path[->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[above] {$ $} (m-1-2) 
(m-2-1) edge node[below]  {$\chi_A  $} (m-2-2)
(m-1-2) edge node[right]  {$t $} (m-2-2);
\path[right hook ->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[left]  {$  $} (m-2-1);
\end{tikzpicture}
\end{center}
For this pick $X$ in $\cC$ and $x\in G(X)$. Let $S_x$ be a class of all morphisms $f$ in $\cC$ with $X$ as the codomain such that $G(f)(x)\in A(\mathrm{dom}(f))$. Assume that morphism $\chi_A:G\ra \Omega$ of big presheaves makes the square above cartesian. Let $\chi_A(x) = S$. Now for every $f\in S$ we have
$$t_{\mathrm{dom}(f)} = f^*S = f^*\chi_A(x) = \chi_A\left(G(f)(x)\right)$$
and hence $G(f)(x) \in A(\mathrm{dom}(f))$. Thus $f\in S_x$. On the other hand for every $f\in S_x$ we have
$$t_{\mathrm{dom}(f)} = \chi_A\left(G(f)(x)\right) = f^*\chi_A(x) =  f^*S$$
and hence $f\in S$. These imply that $S = S_x$ and $\chi_A(x) = S_x$ for every $x\in G(X)$. Therefore, there exists at most one $\chi_A$. It suffices to check that $\chi_A:G\ra \Omega$ given by formula $\chi_A(x) = S_x$ for every $x\in G(X)$ and for every object $X$ in $\cC$ is a well defined morphism of big presheaves and makes the square above cartesian. First note that $f^*S_x =S_{G(f)(x)}$ for every $f$ in $\cC$ with the codomain in $X$ and for every $x\in G(X)$. This implies that $\chi_A$ is a morphism of big presheaves. Next $\chi_A$ makes the square above cartesian because $\chi_A(x) = t_X$ if and only if $S_x = t_X$ and this holds  if and only if $x\in A(X)$.
\end{proof}

\begin{definition}
Let $\cC$ be a category with finite limits. Denote by $\bd{1}$ a terminal object of $\cC$. A pair $(\Omega, t:\bd{1}\ra \Omega)$ such that for every object $G$ in $\cC$ and for every monomorphism $m:A\ra  G$ there exists a unique morphism $\chi_A:G\ra \Omega$ making the following square cartesian
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ A & \bd{1}  \\
  G   & \Omega   \\} ;
\path[->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[above] {$ $} (m-1-2) 
(m-2-1) edge node[below]  {$\chi_A  $} (m-2-2)
(m-1-2) edge node[right]  {$t $} (m-2-2)
(m-1-1) edge node[left]  {$m  $} (m-2-1);
\end{tikzpicture}
\end{center}
is called \textit{a subobject classifier of $\cC$}.
\end{definition}

\begin{corollary}
Let $(\cC,\cJ)$ be a Grothendieck site such that $\cC$ is a small category. Then $\Sh(\cC,\cJ)$ admits a subobject classifier.
\end{corollary}
\begin{proof}
Since $\cC$ is small, we derive that big presheaf $\Omega$ described before statement of Theorem \ref{theorem:subobjectclassifierissheaf} is a presheaf on $\cC$. Next Theorem \ref{theorem:subobjectclassifierissheaf} and Proposition \ref{proposition:universalpropertyofsubobjectclassifier} state that $\Omega$ is a sheaf with respect to $\cJ$ and that the pair $(\Omega, t)$ is a subobject classifier in $\Sh(\cC,\cJ)$.
\end{proof}

\section{Local surjections and epimorphisms}

\begin{definition}
Let $(\cC,\cJ)$ be a Grothendieck site. A morphism $\sigma:F\ra G$ of sheaves on $(\cC,\cJ)$ is called \textit{locally surjective} if for every object $X$ of $\cC$ and for every $y$ in $G(X)$ there exists a covering sieve $S$ on $X$ such that for every $f$ in $S$ there exists an element $x_f\in F\left(\mathrm{dom}(f)\right)$ with $\sigma(x_f) = G(f)(y)$.
\end{definition}

\begin{theorem}\label{theorem:epimorphismsinthecategoryofsheaves}
Let $(\cC,\cJ)$ be a Grothendieck site. Suppose that $\sigma:F\ra G$ is a morphism of sheaves on $\left(\cC,\cJ\right)$. Consider the following assertions.
\begin{enumerate}[label=\emph{\textbf{(\roman*)}}, leftmargin=1.5em]
\item $\sigma$ is locally surjective.
\item $\sigma$ is an epimorphism in $\Sh\left(\cC,\cJ\right)$.
\end{enumerate}
Then $\emph{\textbf{(i)}}\Rightarrow \emph{\textbf{(ii)}}$ and if $\cJ$ is locall small, then $\emph{\textbf{(ii)}}\Rightarrow \emph{\textbf{(i)}}$.
\end{theorem}
\noindent
We need the following observation.

\begin{lemma}\label{lemma:sheafcriterionforsubpresheaves}
Let $G$ be a sheaf on a Grothendieck site $(\cC,\cJ)$ and let $A$ be a subpresheaf of $G$. Then $A$ is a sheaf if and only if for every $X$ in $\cC$, every covering sieve $S$ in $\cJ(X)$ and for every matching family $\{x_f\}_{f\in S}$ for $S$ of elements of $A$ its amalgamation in $G(X)$ is contained in $A(X)$.
\end{lemma}
\begin{proof}[Proof of the lemma]
Left to the reader.
\end{proof}

\begin{proof}[Proof of the theorem]
The implication $\textbf{(i)}\Rightarrow \textbf{(ii)}$ is easy and the proof in {\cite[page 143, Corollary 5]{maclane1994sheaves}} holds in general case.\\
Assume \textbf{(ii)} and that $\cJ$ is locally small. For every morphism $\tau:H\ra K$ of big presheaves we denote by $\Image(\tau)$ a big subpresheaf of $K$ given by $X\mapsto \tau_X\left(H(X)\right)$. Note that if $H$ is a presheaf, then $\Image(\tau)$ is a presheaf. Now let us prove that \textbf{(i)} holds. Let $A$ be a subpresheaf of $G$ given by
$$A(X) = \big\{x\in G(X)\,\big|\,\mbox{ there exists }S\in \cJ(X)\mbox{ such that }G(f)(x)\in \Image(\sigma)(Y)\mbox{ for every }f:Y\ra X\mbox{ in } S\big\}$$
for every $X$ in $\cC$. By Lemma \ref{lemma:sheafcriterionforsubpresheaves} we derive that $A$ is a sheaf with respect to $\cJ$. In order to prove \textbf{(i)} it suffices to check that $A = G$. Let $\Omega$ be a big presheaf described before statement of Theorem \ref{theorem:subobjectclassifierissheaf}. Since $A$ is a subsheaf of $G$ there exists a unique morphism $\chi_A:G\ra \Omega$ of big presheaves such that the square
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{ A & \bd{1}  \\
  G   & \Omega   \\} ;
\path[->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[above] {$ $} (m-1-2) 
(m-2-1) edge node[below]  {$\chi_A  $} (m-2-2)
(m-1-2) edge node[right]  {$t $} (m-2-2);
\path[right hook ->,line width=0.8pt, font=\scriptsize]  
(m-1-1) edge node[left]  {$  $} (m-2-1);
\end{tikzpicture}
\end{center}
is cartesian in the category of big presheaves. This follows by Proposition \ref{proposition:universalpropertyofsubobjectclassifier}. Let $G\coprod \bd{1}$ be a coproduct in the category of presheaves and consider a morphism $\rho:G\coprod \bd{1}\ra \Omega$ such that $\rho\cdot i = \chi_A$ and $\rho\cdot j = t$, where $i:G\hookrightarrow G\coprod \bd{1}$ and $j:\bd{1}\hookrightarrow G\coprod \bd{1}$ are structural arrows. Then $\Image(\rho)$ is a subpresheaf of $\Omega$ (see the remark at the beginning of the proof) and by Theorem \ref{theorem:subobjectclassifierissheaf} it is a separated presheaf on $(\cC,\cJ)$. We also consider the restriction $\delta:G\coprod \bd{1}\ra \Image(\rho)$ of $\rho$ to its image and the unique morphism $u:G\ra \bd{1}$. Let $H$ together with morphism $\eta:\Image(\rho)\ra H$ be a sheaf associated with $\Image(\rho)$. It exists since $\cJ$ is locally small (Theorem \ref{theorem:associatedsheaf}). Since
$$\rho\cdot i\cdot \sigma = \chi_A\cdot \sigma = t\cdot u\cdot \sigma = \rho\cdot j\cdot u\cdot \sigma$$
we deduce that $\delta \cdot i\cdot \sigma = \delta\cdot j\cdot u\cdot \sigma$ and hence
$$\eta\cdot \delta\cdot i \cdot \sigma = \eta\cdot \delta\cdot j\cdot u\cdot \sigma$$
Since $\sigma$ is an epimorphism in the category of sheaves, we derive that $\eta\cdot \delta \cdot i = \eta\cdot \delta\cdot j\cdot u$. Since $\eta$ is a monomorphism of presheaves (Theorem \ref{theorem:associatedsheaf} and the fact that $\Image(\rho)$ is separated), we deduce that $\delta\cdot i = \delta \cdot j\cdot u$. Thus $\rho \cdot i = \rho\cdot j\cdot u$ and hence $\chi_A = t\cdot u$. From this last equality using Proposition \ref{proposition:universalpropertyofsubobjectclassifier} we deduce that $A = G$.
\end{proof}

\begin{theorem}
Let $(\cC,\cJ)$ be a Grothendieck site and suppose that $\sigma:F\ra G$ is a locally surjective morphism of sheaves with respect to $\cJ$. Consider the fork diagram
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=3em,text height=1.5ex, text depth=0.25ex] 
{F\times_GF &  F & G  \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge[transform canvas={yshift=0.5ex}] node[above] {$ p_1  $} (m-1-2)
(m-1-1) edge[transform canvas={yshift=-0.5ex}] node[below] {$ p_2 $} (m-1-2)
(m-1-2) edge node[above] {$ \sigma  $} (m-1-3);
\end{tikzpicture}
\end{center}
where
\begin{center}
\begin{tikzpicture}
[description/.style={fill=white,inner sep=2pt}]
\matrix (m) [matrix of math nodes, row sep=3em, column sep=2em,text height=1.5ex, text depth=0.25ex] 
{F\times_G F     &   & F   \\
 F              &   & G   \\} ;
\path[->,line width=0.8pt,font=\scriptsize]
(m-1-1) edge node[above] {$ p_1 $} (m-1-3)
(m-2-1) edge node[below] {$ \sigma $} (m-2-3)
(m-1-1) edge node[left] {$ p_2 $} (m-2-1)
(m-1-3) edge node[right] {$ \sigma $} (m-2-3);
\end{tikzpicture}
\end{center}
is a cartesian square of presheaves. Then the fork diagram is a cokernel of $(p_1,p_2)$ in the category $\Sh(\cC,\cJ)$.
\end{theorem}

\begin{lemma}\label{lemma:familythatismatchingifsatisfiesarelation}
Let $H$ be a sheaf on $(\cC,\cJ)$ and assume that $\tau:F\ra H$ is a morphism such that $\tau\cdot p_1 = \tau \cdot p_2$. Let $X$ be an object of $\cC$ and $y$ be an element in $G(X)$ and pick a covering sieve $S$ on $X$ such that for every $f$ in $S$ there exists an element $x_f\in F\left(\mathrm{dom}(f)\right)$ with $\sigma(x_f) = G(f)(y)$. Then $\{\tau(x_f)\}_{f\in S}$ is a matching family for $S$ of elements of $H$ and its amalgamation depends on $y$ and not on choices of $S$ and $\{x_f\}_{f\in S}$. 
\end{lemma}
\begin{proof}
Let $g$ be a morphism in $\cC$ and $f$ be a morphism in $S$ such that $f\cdot g$ exists in $\cC$. Then we have
$$\sigma\left(F(g)(x_f)\right)= G(g)\left(\sigma(x_f)\right) = \left(G(g)\cdot G(f)\right)(y) = \sigma(x_{f\cdot g})$$
Thus there exists $u\in \left(F\times_G F\right)(\mathrm{dom}(f))$ such that $p_1(u) = F(g)(x_f)$ and $p_2(u) = x_{f\cdot g}$. Thus
$$H(g)\left(\tau(x_f)\right) = \tau\left(F(g)(x_f)\right) = \tau\left(p_1(u)\right) = \tau\left(p_2(u)\right) = \tau\left(x_{f\cdot g}\right)$$
and hence $\{\tau(x_f)\}_{f\in S}$ is a matching family for $S$ of elements of $H$.\\
Now suppose that $T$ is another covering sieve on $X$ and for every $f$ in $T$ there exists $z_f\in F(\mathrm{dom}(f))$ with $\sigma(z_f) = G(f)(y)$. Assume that $f\in S\cap T$. Note that in this case $\sigma(z_f) = \sigma(x_f)$. Thus there exists $u\in \left(F\times_G F\right)(\mathrm{dom}(f))$ such that $p_1(u) = x_f$ and $p_2(u) = z_f$. Then
$$\tau(x_f) = \tau\left(p_1(u)\right) = \tau\left(p_2(u)\right) = \tau(z_f)$$
From this and from what we proved before, we derive that
$$\{\tau(x_f)\}_{f\in S},\,\{\tau(z_f)\}_{f\in T},\,\{\tau(x_f)\}_{f\in S}\cup \{\tau(z_f)\}_{f\in T}$$
are matching families of elements of $H$. Therefore, they must have the same amalgamation. Hence the amalgamation of $\{\tau(x_f)\}_{f\in S}$ depends only on $y$.
\end{proof}

\begin{proof}[Proof of the theorem]
Let $\tau:G\ra H$ be a morphism of sheaves with respect to $\cJ$ and assume that $\tau\cdot p_1 = \tau \cdot p_2$. Our goal is to define and prove uniqueness of a morphism $\rho:G\ra H$ such that $\rho\cdot \sigma = \tau$. Fix object $X$ in $\cC$ and $y\in G(X)$. Let $S$ be a covering sieve on $X$ such that for each $f$ in $S$ there exists $x_f\in F(\mathrm{dom}(f))$ with $\sigma(x_f) = G(f)(y)$. Such a sieve $S$ and a collection $\{x_f\}_{f\in S}$ exist according to the fact that $\sigma$ is locally surjective. By Lemma \ref{lemma:familythatismatchingifsatisfiesarelation} we deduce that $\{\tau(x_f)\}_{f\in S}$ is a matching family for $S$ of elements of $H$. Since we want to define morphism $\rho$ such that $\rho\cdot \sigma =\tau$, we are forced to define $\rho(y)$ as the amalgamation of $\{\tau(x_f)\}_{f\in S}$. Thus there exists at most one morphism $\rho$ with $\rho\cdot \sigma =\tau$. Again by Lemma \ref{lemma:familythatismatchingifsatisfiesarelation} element $\rho(y)$ does not depend on choices of $S$ and $\{x_f\}_{f\in S}$. Hence $\rho(y)$ is well defined. It remains to prove that $y\mapsto \rho(y)$ is a morphism of presheaves. Let $g$ be a morphism in $\cC$ having $X$ as the codomain. Then $\{\tau(x_{g\cdot h})\}_{h\in g^*S}$ is a matching family and it has $\rho\left(G(g)(y)\right)$ and $H(g)\left(\rho(y)\right)$ as amalgamations. Since $H$ is a sheaf, we derive that
$$\rho\left(G(g)(y)\right) = H(g)\left(\rho(y)\right)$$
This proves that $\rho:G\ra H$ is a morphism of sheaves. By definition of $\rho$ we have $\rho\cdot \sigma = \tau$ and this finishes the proof.
\end{proof}




\small
\bibliographystyle{alpha}
\bibliography{../zzz}

\end{document}